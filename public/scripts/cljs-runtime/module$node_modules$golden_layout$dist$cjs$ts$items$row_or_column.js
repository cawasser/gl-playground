shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$items$row_or_column=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.RowOrColumn=void 0;const config_1=require("module$node_modules$golden_layout$dist$cjs$ts$config$config"),splitter_1=require("module$node_modules$golden_layout$dist$cjs$ts$controls$splitter"),internal_error_1=require("module$node_modules$golden_layout$dist$cjs$ts$errors$internal_error"),types_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$types"),
utils_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$utils"),content_item_1=require("module$node_modules$golden_layout$dist$cjs$ts$items$content_item"),stack_1=require("module$node_modules$golden_layout$dist$cjs$ts$items$stack");class RowOrColumn extends content_item_1.ContentItem{constructor(isColumn,layoutManager,config,_rowOrColumnParent){super(layoutManager,config,_rowOrColumnParent,RowOrColumn.createElement(document,isColumn));this._rowOrColumnParent=_rowOrColumnParent;this._splitter=
[];this.isRow=!isColumn;this.isColumn=isColumn;this._childElementContainer=this.element;this._splitterSize=layoutManager.layoutConfig.dimensions.borderWidth;this._splitterGrabSize=layoutManager.layoutConfig.dimensions.borderGrabWidth;this._dimension=(this._isColumn=isColumn)?"height":"width";this._splitterMaxPosition=this._splitterMinPosition=this._splitterPosition=null;switch(config.type){case types_1.ItemType.row:case types_1.ItemType.column:this._configType=config.type;break;default:throw new internal_error_1.AssertError("ROCCCT00925");
}}newComponent(componentType,componentState,title,index){return this.newItem({type:"component",componentType,componentState,title},index)}addComponent(componentType,componentState,title,index){return this.addItem({type:"component",componentType,componentState,title},index)}newItem(itemConfig,index){index=this.addItem(itemConfig,index);index=this.contentItems[index];return content_item_1.ContentItem.isStack(index)&&config_1.ItemConfig.isComponent(itemConfig)?index.contentItems[0]:index}addItem(itemConfig,
index){this.layoutManager.checkMinimiseMaximisedStack();itemConfig=config_1.ItemConfig.resolve(itemConfig);itemConfig=this.layoutManager.createAndInitContentItem(itemConfig,this);return this.addChild(itemConfig,index,!1)}addChild(contentItem,index,suspendResize){void 0===index&&(index=this.contentItems.length);if(0<this.contentItems.length){var splitterElement=this.createSplitter(Math.max(0,index-1)).element;0<index?(this.contentItems[index-1].element.insertAdjacentElement("afterend",splitterElement),
splitterElement.insertAdjacentElement("afterend",contentItem.element),this.isDocked(index-1)&&(utils_1.setElementDisplayVisibility(this._splitter[index-1].element,!1),utils_1.setElementDisplayVisibility(this._splitter[index].element,!0))):(this.contentItems[0].element.insertAdjacentElement("beforebegin",splitterElement),splitterElement.insertAdjacentElement("beforebegin",contentItem.element))}else this._childElementContainer.appendChild(contentItem.element);super.addChild(contentItem,index);splitterElement=
1/this.contentItems.length*100;if(!0===suspendResize)return this.emitBaseBubblingEvent("stateChanged"),index;for(suspendResize=0;suspendResize<this.contentItems.length;suspendResize++)if(this.contentItems[suspendResize]===contentItem)contentItem[this._dimension]=splitterElement;else{const itemSize=this.contentItems[suspendResize][this._dimension]*=(100-splitterElement)/100;this.contentItems[suspendResize][this._dimension]=itemSize}this.updateSize();this.emitBaseBubblingEvent("stateChanged");this.validateDocking();
return index}removeChild(contentItem,keepChild){const removedItemSize=contentItem[this._dimension];var index=this.contentItems.indexOf(contentItem),splitterIndex=Math.max(index-1,0);if(-1===index)throw Error("Can't remove child. ContentItem is not child of this Row or Column");this._splitter[splitterIndex]&&(this._splitter[splitterIndex].destroy(),this._splitter.splice(splitterIndex,1));splitterIndex<this._splitter.length&&this.isDocked(splitterIndex)&&utils_1.setElementDisplayVisibility(this._splitter[splitterIndex].element,
!1);index=this.calculateDockedCount();for(splitterIndex=0;splitterIndex<this.contentItems.length;splitterIndex++)this.contentItems[splitterIndex]!==contentItem&&(this.isDocked(splitterIndex)||(this.contentItems[splitterIndex][this._dimension]+=removedItemSize/(this.contentItems.length-1-index)));super.removeChild(contentItem,keepChild);1===this.contentItems.length&&!0===this.isClosable?(contentItem=this.contentItems[0],this.contentItems.length=0,this._rowOrColumnParent.replaceChild(this,contentItem,
!0),this._rowOrColumnParent instanceof RowOrColumn&&this._rowOrColumnParent.validateDocking()):(this.updateSize(),this.emitBaseBubblingEvent("stateChanged"),this.validateDocking())}replaceChild(oldChild,newChild){const size=oldChild[this._dimension];super.replaceChild(oldChild,newChild);newChild[this._dimension]=size;this.updateSize();this.emitBaseBubblingEvent("stateChanged")}updateSize(){this.updateNodeSize();this.updateContentItemsSize()}dock(contentItem,mode,collapsed){if(1===this.contentItems.length)throw Error("Can't dock child when it single");
var removedItemSize=contentItem[this._dimension];const headerSize=!1===this.layoutManager.layoutConfig.header.show?0:this.layoutManager.layoutConfig.dimensions.headerHeight,index=this.contentItems.indexOf(contentItem);var splitterIndex=Math.max(index-1,0);if(-1===index)throw Error("Can't dock child. ContentItem is not child of this Row or Column");const isDocked=contentItem.docker.docked;if(void 0===mode||mode!==isDocked){if(isDocked){this._splitter[splitterIndex].element.style.display="";for(collapsed=
0;collapsed<this.contentItems.length;collapsed++)removedItemSize=contentItem.docker.size,this.contentItems[collapsed]===contentItem?contentItem[this._dimension]=removedItemSize:(removedItemSize=this.contentItems[collapsed][this._dimension]*=(100-removedItemSize)/100,this.contentItems[collapsed][this._dimension]=removedItemSize);contentItem.setUndocked()}else{if(2>this.contentItems.length-this.calculateDockedCount())throw new internal_error_1.AssertError("Can't dock child when it is last in "+this.type);
mode={column:{first:types_1.Side.top,last:types_1.Side.bottom},row:{first:types_1.Side.left,last:types_1.Side.right}}[this._configType][index?"last":"first"];contentItem.headerSide!==mode&&contentItem.positionHeader(mode);this._splitter[splitterIndex]&&utils_1.setElementDisplayVisibility(this._splitter[splitterIndex].element,!1);splitterIndex=this.calculateDockedCount();for(mode=0;mode<this.contentItems.length;mode++)this.contentItems[mode]!==contentItem?this.isDocked(mode)||(this.contentItems[mode][this._dimension]+=
removedItemSize/(this.contentItems.length-1-splitterIndex)):this.contentItems[mode][this._dimension]=0;contentItem.setDocked({docked:!0,dimension:this._dimension,size:removedItemSize,realSize:RowOrColumn.getElementDimensionSize(contentItem.element,this._dimension)-headerSize});collapsed&&RowOrColumn.setElementDimensionSize(contentItem.childElementContainer,this._dimension,0)}contentItem.element.classList.toggle("lm_docked",contentItem.docker.docked);this.updateSize();this.emitBaseBubblingEvent("stateChanged");
this.validateDocking()}}validateDocking(){var _a;const can=1<this.contentItems.length-this.calculateDockedCount();for(let i=0;i<this.contentItems.length;++i){const contentItem=this.contentItems[i];contentItem instanceof stack_1.Stack&&(contentItem.setDockable(null!==(_a=this.isDocked(i))&&void 0!==_a?_a:can),contentItem.setRowColumnClosable(can))}}init(){if(!0!==this.isInitialised){this.updateNodeSize();for(var i=0;i<this.contentItems.length;i++)this._childElementContainer.appendChild(this.contentItems[i].element);
super.init();for(i=0;i<this.contentItems.length-1;i++)this.contentItems[i].element.insertAdjacentElement("afterend",this.createSplitter(i).element);for(i=0;i<this.contentItems.length;i++){const contentItem=this.contentItems[i];contentItem instanceof stack_1.Stack&&contentItem.docker.docked&&this.dock(contentItem,!0,!0)}this.initContentItems()}}toConfig(){return{type:this.type,content:this.calculateConfigContent(),width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,
id:this.id,isClosable:this.isClosable}}setParent(parent){this._rowOrColumnParent=parent;super.setParent(parent)}updateNodeSize(){0<this.contentItems.length&&(this.calculateRelativeSizes(),this.setAbsoluteSizes());this.emitBaseBubblingEvent("stateChanged");this.emit("resize")}setAbsoluteSizes(){const sizeData=this.calculateAbsoluteSizes();for(let i=0;i<this.contentItems.length;i++)0<sizeData.additionalPixel-i&&sizeData.itemSizes[i]++,this._isColumn?(utils_1.setElementWidth(this.contentItems[i].element,
sizeData.totalWidth),utils_1.setElementHeight(this.contentItems[i].element,sizeData.itemSizes[i])):(utils_1.setElementWidth(this.contentItems[i].element,sizeData.itemSizes[i]),utils_1.setElementHeight(this.contentItems[i].element,sizeData.totalHeight))}calculateAbsoluteSizes(){var totalSplitterSize=(this.contentItems.length-1)*this._splitterSize;const headerSize=this.layoutManager.layoutConfig.dimensions.headerHeight;let {width:totalWidth,height:totalHeight}=utils_1.getElementWidthAndHeight(this.element);
this._isColumn?totalHeight-=totalSplitterSize:totalWidth-=totalSplitterSize;for(totalSplitterSize=0;totalSplitterSize<this.contentItems.length;totalSplitterSize++)this.isDocked(totalSplitterSize)&&(this._isColumn?totalHeight-=headerSize-this._splitterSize:totalWidth-=headerSize-this._splitterSize);totalSplitterSize=0;const itemSizes=[];for(let i=0;i<this.contentItems.length;i++){let itemSize;itemSize=this._isColumn?Math.floor(this.contentItems[i].height/100*totalHeight):Math.floor(this.contentItems[i].width/
100*totalWidth);this.isDocked(i)&&(itemSize=headerSize);totalSplitterSize+=itemSize;itemSizes.push(itemSize)}return{itemSizes,additionalPixel:Math.floor((this._isColumn?totalHeight:totalWidth)-totalSplitterSize),totalWidth,totalHeight}}calculateRelativeSizes(){let total=0;var itemsWithoutSetDimension=[];for(var i=0;i<this.contentItems.length;i++)void 0!==this.contentItems[i][this._dimension]?total+=this.contentItems[i][this._dimension]:itemsWithoutSetDimension.push(this.contentItems[i]);if(100!==
Math.round(total))if(100>Math.round(total)&&0<itemsWithoutSetDimension.length)for(i=0;i<itemsWithoutSetDimension.length;i++)itemsWithoutSetDimension[i][this._dimension]=(100-total)/itemsWithoutSetDimension.length;else{if(100<Math.round(total))for(i=0;i<itemsWithoutSetDimension.length;i++)itemsWithoutSetDimension[i][this._dimension]=50,total+=50;for(itemsWithoutSetDimension=0;itemsWithoutSetDimension<this.contentItems.length;itemsWithoutSetDimension++)this.contentItems[itemsWithoutSetDimension][this._dimension]=
this.contentItems[itemsWithoutSetDimension][this._dimension]/total*100}this.respectMinItemWidth()}respectMinItemWidth(){var minItemWidth=this.layoutManager.layoutConfig.dimensions.minItemWidth,totalOverMin=0,totalUnderMin=0;const entriesOverMin=[],allEntries=[];if(!(this._isColumn||!minItemWidth||1>=this.contentItems.length)){var sizeData=this.calculateAbsoluteSizes();for(var i=0;i<sizeData.itemSizes.length;i++){var itemSize=sizeData.itemSizes[i];itemSize<minItemWidth?(totalUnderMin+=minItemWidth-
itemSize,itemSize={width:minItemWidth}):(totalOverMin+=itemSize-minItemWidth,itemSize={width:itemSize},entriesOverMin.push(itemSize));allEntries.push(itemSize)}if(!(0===totalUnderMin||totalUnderMin>totalOverMin)){totalOverMin=totalUnderMin/totalOverMin;for(i=0;i<entriesOverMin.length;i++){itemSize=entriesOverMin[i];const reducedWidth=Math.round((itemSize.width-minItemWidth)*totalOverMin);totalUnderMin-=reducedWidth;itemSize.width-=reducedWidth}0!==totalUnderMin&&(allEntries[allEntries.length-1].width-=
totalUnderMin);for(minItemWidth=0;minItemWidth<this.contentItems.length;minItemWidth++)this.contentItems[minItemWidth].width=allEntries[minItemWidth].width/sizeData.totalWidth*100}}}createSplitter(index){const splitter=new splitter_1.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize);splitter.on("drag",(offsetX,offsetY)=>this.onSplitterDrag(splitter,offsetX,offsetY));splitter.on("dragStop",()=>this.onSplitterDragStop(splitter));splitter.on("dragStart",()=>this.onSplitterDragStart(splitter));
this._splitter.splice(index,0,splitter);return splitter}getItemsForSplitter(splitter){splitter=this._splitter.indexOf(splitter);return{before:this.contentItems[splitter],after:this.contentItems[splitter+1]}}isDocked(index){if(index>=this.contentItems.length)return!1;index=this.contentItems[index];return index instanceof stack_1.Stack?index.docker.docked:!1}calculateDockedCount(){let count=0;for(let i=0;i<this.contentItems.length;++i)this.isDocked(i)&&count++;return count}getMinimumDimensions(arr){var _a,
_b;let minWidth=0,minHeight=0;for(let i=0;i<arr.length;++i)minWidth=Math.max(null!==(_a=arr[i].minWidth)&&void 0!==_a?_a:0,minWidth),minHeight=Math.max(null!==(_b=arr[i].minHeight)&&void 0!==_b?_b:0,minHeight);return{horizontal:minWidth,vertical:minHeight}}onSplitterDragStart(splitter){splitter=this.getItemsForSplitter(splitter);const minSize=this.layoutManager.layoutConfig.dimensions[this._isColumn?"minItemHeight":"minItemWidth"];var beforeMinDim=this.getMinimumDimensions(splitter.before.contentItems);
beforeMinDim=this._isColumn?beforeMinDim.vertical:beforeMinDim.horizontal;var afterMinDim=this.getMinimumDimensions(splitter.after.contentItems);afterMinDim=this._isColumn?afterMinDim.vertical:afterMinDim.horizontal;this._splitterPosition=0;this._splitterMinPosition=-1*(utils_1.pixelsToNumber(splitter.before.element.style[this._dimension])-(beforeMinDim||minSize));this._splitterMaxPosition=utils_1.pixelsToNumber(splitter.after.element.style[this._dimension])-(afterMinDim||minSize)}onSplitterDrag(splitter,
offsetX,offsetY){offsetX=this._isColumn?offsetY:offsetX;if(null===this._splitterMinPosition||null===this._splitterMaxPosition)throw new internal_error_1.UnexpectedNullError("ROCOSD59226");offsetX>this._splitterMinPosition&&offsetX<this._splitterMaxPosition&&(this._splitterPosition=offsetX,offsetX=utils_1.numberToPixels(offsetX),this._isColumn?splitter.element.style.top=offsetX:splitter.element.style.left=offsetX)}onSplitterDragStop(splitter){if(null===this._splitterPosition)throw new internal_error_1.UnexpectedNullError("ROCOSDS66932");
{const items=this.getItemsForSplitter(splitter);var sizeBefore=utils_1.pixelsToNumber(items.before.element.style[this._dimension]),sizeAfter=utils_1.pixelsToNumber(items.after.element.style[this._dimension]);sizeBefore=(this._splitterPosition+sizeBefore)/(sizeBefore+sizeAfter);sizeAfter=items.before[this._dimension]+items.after[this._dimension];items.before[this._dimension]=sizeBefore*sizeAfter;items.after[this._dimension]=(1-sizeBefore)*sizeAfter;splitter.element.style.top=utils_1.numberToPixels(0);
splitter.element.style.left=utils_1.numberToPixels(0);globalThis.requestAnimationFrame(()=>this.updateSize())}}}exports.RowOrColumn=RowOrColumn;(function(RowOrColumn){RowOrColumn.getElementDimensionSize=function(element,dimension){return"width"===dimension?utils_1.getElementWidth(element):utils_1.getElementHeight(element)};RowOrColumn.setElementDimensionSize=function(element,dimension,value){return"width"===dimension?utils_1.setElementWidth(element,value):utils_1.setElementHeight(element,value)};
RowOrColumn.createElement=function(document,isColumn){document=document.createElement("div");document.classList.add("lm_item");isColumn?document.classList.add("lm_column"):document.classList.add("lm_row");return document}})(RowOrColumn=exports.RowOrColumn||(exports.RowOrColumn={}))}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$items$row_or_column.js.map
