{
"version":3,
"file":"module$node_modules$golden_layout$dist$cjs$ts$controls$drag_proxy.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/golden-layout/dist/cjs/ts/controls/drag-proxy.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$golden_layout$dist$cjs$ts$controls$drag_proxy\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragProxy = void 0;\nconst internal_error_1 = require(\"../errors/internal-error\");\nconst stack_1 = require(\"../items/stack\");\nconst event_emitter_1 = require(\"../utils/event-emitter\");\nconst jquery_legacy_1 = require(\"../utils/jquery-legacy\");\nconst types_1 = require(\"../utils/types\");\nconst utils_1 = require(\"../utils/utils\");\n/**\n * This class creates a temporary container\n * for the component whilst it is being dragged\n * and handles drag events\n * @internal\n */\nclass DragProxy extends event_emitter_1.EventEmitter {\n    /**\n     * @param x - The initial x position\n     * @param y - The initial y position\n     * @internal\n     */\n    constructor(x, y, _dragListener, _layoutManager, _componentItem, _originalParent) {\n        super();\n        this._dragListener = _dragListener;\n        this._layoutManager = _layoutManager;\n        this._componentItem = _componentItem;\n        this._originalParent = _originalParent;\n        this._area = null;\n        this._lastValidArea = null;\n        this._dragListener.on('drag', (offsetX, offsetY, event) => this.onDrag(offsetX, offsetY, event));\n        this._dragListener.on('dragStop', () => this.onDrop());\n        this._element = document.createElement('div');\n        this._element.classList.add(\"lm_dragProxy\" /* DragProxy */);\n        const headerElement = document.createElement('div');\n        headerElement.classList.add(\"lm_header\" /* Header */);\n        const tabsElement = document.createElement('div');\n        tabsElement.classList.add(\"lm_tabs\" /* Tabs */);\n        const tabElement = document.createElement('div');\n        tabElement.classList.add(\"lm_tab\" /* Tab */);\n        const titleElement = document.createElement('span');\n        titleElement.classList.add(\"lm_title\" /* Title */);\n        tabElement.appendChild(titleElement);\n        tabsElement.appendChild(tabElement);\n        headerElement.appendChild(tabsElement);\n        this._proxyContainerElement = document.createElement('div');\n        this._proxyContainerElement.classList.add(\"lm_content\" /* Content */);\n        this._element.appendChild(headerElement);\n        this._element.appendChild(this._proxyContainerElement);\n        if (this._originalParent instanceof stack_1.Stack && this._originalParent.headerShow) {\n            this._sided = this._originalParent.headerLeftRightSided;\n            this._element.classList.add('lm_' + this._originalParent.headerSide);\n            if ([types_1.Side.right, types_1.Side.bottom].indexOf(this._originalParent.headerSide) >= 0) {\n                this._proxyContainerElement.insertAdjacentElement('afterend', headerElement);\n            }\n        }\n        this._element.style.left = utils_1.numberToPixels(x);\n        this._element.style.top = utils_1.numberToPixels(y);\n        tabElement.setAttribute('title', utils_1.stripTags(this._componentItem.title));\n        titleElement.insertAdjacentText('afterbegin', this._componentItem.title);\n        this._proxyContainerElement.appendChild(this._componentItem.element);\n        if (this._componentItem.parent === null) {\n            // Note that _contentItem will have dummy GroundItem as parent if initiated by a external drag source\n            throw new internal_error_1.UnexpectedNullError('DPC10097');\n        }\n        else {\n            this._componentItemFocused = this._componentItem.focused;\n            if (this._componentItemFocused) {\n                this._componentItem.blur();\n            }\n            this._componentItem.parent.removeChild(this._componentItem, true);\n            this._layoutManager.calculateItemAreas();\n            this.setDimensions();\n            document.body.appendChild(this._element);\n            const offset = jquery_legacy_1.getJQueryOffset(this._layoutManager.container);\n            this._minX = offset.left;\n            this._minY = offset.top;\n            const { width: containerWidth, height: containerHeight } = utils_1.getElementWidthAndHeight(this._layoutManager.container);\n            this._maxX = containerWidth + this._minX;\n            this._maxY = containerHeight + this._minY;\n            const { width: elementWidth, height: elementHeight } = utils_1.getElementWidthAndHeight(this._element);\n            this._width = elementWidth;\n            this._height = elementHeight;\n            if (this._layoutManager.layoutConfig.settings.constrainDragToContainer) {\n                if (x <= this._minX) {\n                    x = Math.ceil(this._minX + 1);\n                }\n                else {\n                    if (x >= this._maxX) {\n                        x = Math.floor(this._maxX - 1);\n                    }\n                }\n                if (y <= this._minY) {\n                    y = Math.ceil(this._minY + 1);\n                }\n                else {\n                    if (y >= this._maxY) {\n                        y = Math.floor(this._maxY - 1);\n                    }\n                }\n            }\n            this.setDropPosition(x, y);\n        }\n    }\n    get element() { return this._element; }\n    /**\n     * Callback on every mouseMove event during a drag. Determines if the drag is\n     * still within the valid drag area and calls the layoutManager to highlight the\n     * current drop area\n     *\n     * @param offsetX - The difference from the original x position in px\n     * @param offsetY - The difference from the original y position in px\n     * @param event -\n     * @internal\n     */\n    onDrag(offsetX, offsetY, event) {\n        const x = event.pageX;\n        const y = event.pageY;\n        if (!this._layoutManager.layoutConfig.settings.constrainDragToContainer) {\n            this.setDropPosition(x, y);\n        }\n        else {\n            const isWithinContainer = x > this._minX && x < this._maxX && y > this._minY && y < this._maxY;\n            if (isWithinContainer) {\n                this.setDropPosition(x, y);\n            }\n        }\n    }\n    /**\n     * Sets the target position, highlighting the appropriate area\n     *\n     * @param x - The x position in px\n     * @param y - The y position in px\n     *\n     * @internal\n     */\n    setDropPosition(x, y) {\n        this._element.style.left = utils_1.numberToPixels(x);\n        this._element.style.top = utils_1.numberToPixels(y);\n        this._area = this._layoutManager.getArea(x, y);\n        if (this._area !== null) {\n            this._lastValidArea = this._area;\n            this._area.contentItem.highlightDropZone(x, y, this._area);\n        }\n    }\n    /**\n     * Callback when the drag has finished. Determines the drop area\n     * and adds the child to it\n     * @internal\n     */\n    onDrop() {\n        const dropTargetIndicator = this._layoutManager.dropTargetIndicator;\n        if (dropTargetIndicator === null) {\n            throw new internal_error_1.UnexpectedNullError('DPOD30011');\n        }\n        else {\n            dropTargetIndicator.hide();\n        }\n        /*\n         * Valid drop area found\n         */\n        let droppedComponentItem;\n        if (this._area !== null) {\n            droppedComponentItem = this._componentItem;\n            this._area.contentItem.onDrop(droppedComponentItem, this._area);\n            /**\n             * No valid drop area available at present, but one has been found before.\n             * Use it\n             */\n        }\n        else if (this._lastValidArea !== null) {\n            droppedComponentItem = this._componentItem;\n            const newParentContentItem = this._lastValidArea.contentItem;\n            newParentContentItem.onDrop(droppedComponentItem, this._lastValidArea);\n            /**\n             * No valid drop area found during the duration of the drag. Return\n             * content item to its original position if a original parent is provided.\n             * (Which is not the case if the drag had been initiated by createDragSource)\n             */\n        }\n        else if (this._originalParent) {\n            droppedComponentItem = this._componentItem;\n            this._originalParent.addChild(droppedComponentItem);\n            /**\n             * The drag didn't ultimately end up with adding the content item to\n             * any container. In order to ensure clean up happens, destroy the\n             * content item.\n             */\n        }\n        else {\n            this._componentItem.destroy(); // contentItem children are now destroyed as well\n        }\n        this._element.remove();\n        this._layoutManager.emit('itemDropped', this._componentItem);\n        if (this._componentItemFocused && droppedComponentItem !== undefined) {\n            droppedComponentItem.focus();\n        }\n    }\n    /**\n     * Updates the Drag Proxy's dimensions\n     * @internal\n     */\n    setDimensions() {\n        const dimensions = this._layoutManager.layoutConfig.dimensions;\n        if (dimensions === undefined) {\n            throw new Error('DragProxy.setDimensions: dimensions undefined');\n        }\n        else {\n            let width = dimensions.dragProxyWidth;\n            let height = dimensions.dragProxyHeight;\n            if (width === undefined || height === undefined) {\n                throw new Error('DragProxy.setDimensions: width and/or height undefined');\n            }\n            else {\n                const headerHeight = this._layoutManager.layoutConfig.header.show === false ? 0 : dimensions.headerHeight;\n                this._element.style.width = utils_1.numberToPixels(width);\n                this._element.style.height = utils_1.numberToPixels(height);\n                width -= (this._sided ? headerHeight : 0);\n                height -= (!this._sided ? headerHeight : 0);\n                this._proxyContainerElement.style.width = utils_1.numberToPixels(width);\n                this._proxyContainerElement.style.height = utils_1.numberToPixels(height);\n                this._componentItem.setDragSize(width, height);\n                this._componentItem.show();\n            }\n        }\n    }\n}\nexports.DragProxy = DragProxy;\n//# sourceMappingURL=drag-proxy.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","DragProxy","internal_error_1","stack_1","event_emitter_1","jquery_legacy_1","types_1","utils_1","EventEmitter","x","y","_dragListener","_layoutManager","_componentItem","_originalParent","_lastValidArea","_area","on","offsetX","offsetY","event","onDrag","onDrop","_element","document","createElement","classList","add","headerElement","tabsElement","tabElement","titleElement","appendChild","_proxyContainerElement","Stack","headerShow","_sided","headerLeftRightSided","headerSide","Side","right","bottom","indexOf","insertAdjacentElement","style","left","numberToPixels","top","setAttribute","stripTags","title","insertAdjacentText","element","parent","UnexpectedNullError","_componentItemFocused","focused","blur","removeChild","calculateItemAreas","setDimensions","body","offset","getJQueryOffset","container","_minX","_minY","containerWidth","containerHeight","getElementWidthAndHeight","_maxX","_maxY","elementWidth","elementHeight","_width","_height","layoutConfig","settings","constrainDragToContainer","Math","ceil","floor","setDropPosition","pageX","pageY","getArea","contentItem","highlightDropZone","dropTargetIndicator","hide","droppedComponentItem","addChild","destroy","remove","emit","undefined","focus","dimensions","Error","width","dragProxyWidth","height","dragProxyHeight","headerHeight","header","show","setDragSize"]
}
