shadow$provide.module$node_modules$flexlayout_react$lib$model$Model=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var Attribute_1=require("module$node_modules$flexlayout_react$lib$Attribute"),AttributeDefinitions_1=require("module$node_modules$flexlayout_react$lib$AttributeDefinitions"),DockLocation_1=require("module$node_modules$flexlayout_react$lib$DockLocation"),Orientation_1=require("module$node_modules$flexlayout_react$lib$Orientation"),Rect_1=
require("module$node_modules$flexlayout_react$lib$Rect"),Actions_1=require("module$node_modules$flexlayout_react$lib$model$Actions"),BorderNode_1=require("module$node_modules$flexlayout_react$lib$model$BorderNode"),BorderSet_1=require("module$node_modules$flexlayout_react$lib$model$BorderSet"),RowNode_1=require("module$node_modules$flexlayout_react$lib$model$RowNode"),TabNode_1=require("module$node_modules$flexlayout_react$lib$model$TabNode"),TabSetNode_1=require("module$node_modules$flexlayout_react$lib$model$TabSetNode");
global=function(){function Model(){this._borderRects={inner:Rect_1.default.empty(),outer:Rect_1.default.empty()};this._attributes={};this._idMap={};this._nextId=0;this._borders=new BorderSet_1.default(this);this._pointerFine=!0}Model.fromJson=function(json){var model=new Model;Model._attributeDefinitions.fromJson(json.global,model._attributes);json.borders&&(model._borders=BorderSet_1.default._fromJson(json.borders,model));model._root=RowNode_1.default._fromJson(json.layout,model);model._tidy();return model};
Model._createAttributeDefinitions=function(){var attributeDefinitions=new AttributeDefinitions_1.default;attributeDefinitions.add("splitterSize",-1).setType(Attribute_1.default.INT);attributeDefinitions.add("enableEdgeDock",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType(Attribute_1.default.JSON);attributeDefinitions.add("tabEnableClose",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabCloseType",1).setType(Attribute_1.default.INT);
attributeDefinitions.add("tabEnableFloat",!1).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabEnableDrag",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabEnableRename",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabClassName",void 0).setType(Attribute_1.default.STRING);attributeDefinitions.add("tabIcon",void 0).setType(Attribute_1.default.STRING);attributeDefinitions.add("tabEnableRenderOnDemand",!0).setType(Attribute_1.default.BOOLEAN);
attributeDefinitions.add("tabDragSpeed",.3).setType(Attribute_1.default.NUMBER);attributeDefinitions.add("tabSetEnableDeleteWhenEmpty",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetEnableDrop",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetEnableDrag",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetEnableDivide",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetEnableMaximize",!0).setType(Attribute_1.default.BOOLEAN);
attributeDefinitions.add("tabSetAutoSelectTab",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetClassNameTabStrip",void 0).setType(Attribute_1.default.STRING);attributeDefinitions.add("tabSetClassNameHeader",void 0).setType(Attribute_1.default.STRING);attributeDefinitions.add("tabSetEnableTabStrip",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("tabSetHeaderHeight",0).setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.add("tabSetTabStripHeight",
0).setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType(Attribute_1.default.JSON);attributeDefinitions.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType(Attribute_1.default.JSON);attributeDefinitions.add("tabSetTabLocation","top").setType(Attribute_1.default.STRING);attributeDefinitions.add("tabSetMinWidth",0).setType(Attribute_1.default.NUMBER);attributeDefinitions.add("tabSetMinHeight",0).setType(Attribute_1.default.NUMBER);
attributeDefinitions.add("borderSize",200).setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.add("borderMinSize",0).setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.add("borderBarSize",0).setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.add("borderEnableDrop",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("borderAutoSelectTabWhenOpen",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("borderAutoSelectTabWhenClosed",
!1).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.add("borderClassName",void 0).setType(Attribute_1.default.STRING);return attributeDefinitions};Model.prototype._setChangeListener=function(listener){this._changeListener=listener};Model.prototype.getActiveTabset=function(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet};Model.prototype._setActiveTabset=function(tabsetNode){this._activeTabSet=tabsetNode};Model.prototype.getMaximizedTabset=function(){return this._maximizedTabSet};
Model.prototype._setMaximizedTabset=function(tabsetNode){this._maximizedTabSet=tabsetNode};Model.prototype.getRoot=function(){return this._root};Model.prototype.getBorderSet=function(){return this._borders};Model.prototype._getOuterInnerRects=function(){return this._borderRects};Model.prototype._getPointerFine=function(){return this._pointerFine};Model.prototype._setPointerFine=function(pointerFine){this._pointerFine=pointerFine};Model.prototype.visitNodes=function(fn){this._borders._forEachNode(fn);
this._root._forEachNode(fn,0)};Model.prototype.getNodeById=function(id){return this._idMap[id]};Model.prototype.doAction=function(action){var returnVal=void 0;switch(action.type){case Actions_1.default.ADD_NODE:var newNode=new TabNode_1.default(this,action.data.json,!0),toNode=this._idMap[action.data.toNode];if(toNode instanceof TabSetNode_1.default||toNode instanceof BorderNode_1.default||toNode instanceof RowNode_1.default)toNode.drop(newNode,DockLocation_1.default.getByName(action.data.location),
action.data.index,action.data.select),returnVal=newNode;break;case Actions_1.default.MOVE_NODE:newNode=this._idMap[action.data.fromNode];if(newNode instanceof TabNode_1.default||newNode instanceof TabSetNode_1.default)toNode=this._idMap[action.data.toNode],(toNode instanceof TabSetNode_1.default||toNode instanceof BorderNode_1.default||toNode instanceof RowNode_1.default)&&toNode.drop(newNode,DockLocation_1.default.getByName(action.data.location),action.data.index,action.data.select);break;case Actions_1.default.DELETE_TAB:toNode=
this._idMap[action.data.node];toNode instanceof TabNode_1.default&&(delete this._idMap[action.data.node],toNode._delete());break;case Actions_1.default.FLOAT_TAB:toNode=this._idMap[action.data.node];toNode instanceof TabNode_1.default&&toNode._setFloating(!0);break;case Actions_1.default.UNFLOAT_TAB:toNode=this._idMap[action.data.node];toNode instanceof TabNode_1.default&&toNode._setFloating(!1);break;case Actions_1.default.RENAME_TAB:toNode=this._idMap[action.data.node];toNode instanceof TabNode_1.default&&
toNode._setName(action.data.text);break;case Actions_1.default.SELECT_TAB:toNode=this._idMap[action.data.tabNode];toNode instanceof TabNode_1.default&&(action=toNode.getParent(),toNode=action.getChildren().indexOf(toNode),action instanceof BorderNode_1.default?action.getSelected()===toNode?action._setSelected(-1):action._setSelected(toNode):action instanceof TabSetNode_1.default&&(action.getSelected()!==toNode&&action._setSelected(toNode),this._activeTabSet=action));break;case Actions_1.default.SET_ACTIVE_TABSET:action=
this._idMap[action.data.tabsetNode];action instanceof TabSetNode_1.default&&(this._activeTabSet=action);break;case Actions_1.default.ADJUST_SPLIT:toNode=this._idMap[action.data.node1];newNode=this._idMap[action.data.node2];(toNode instanceof TabSetNode_1.default||toNode instanceof RowNode_1.default)&&(newNode instanceof TabSetNode_1.default||newNode instanceof RowNode_1.default)&&(this._adjustSplitSide(toNode,action.data.weight1,action.data.pixelWidth1),this._adjustSplitSide(newNode,action.data.weight2,
action.data.pixelWidth2));break;case Actions_1.default.ADJUST_BORDER_SPLIT:toNode=this._idMap[action.data.node];toNode instanceof BorderNode_1.default&&toNode._setSize(action.data.pos);break;case Actions_1.default.MAXIMIZE_TOGGLE:toNode=this._idMap[action.data.node];toNode instanceof TabSetNode_1.default&&(toNode===this._maximizedTabSet?this._maximizedTabSet=void 0:this._activeTabSet=this._maximizedTabSet=toNode);break;case Actions_1.default.UPDATE_MODEL_ATTRIBUTES:this._updateAttrs(action.data.json);
break;case Actions_1.default.UPDATE_NODE_ATTRIBUTES:toNode=this._idMap[action.data.node],toNode._updateAttrs(action.data.json)}this._updateIdMap();void 0!==this._changeListener&&this._changeListener();return returnVal};Model.prototype._updateIdMap=function(){var _this=this;this._idMap={};this.visitNodes(function(node){return _this._idMap[node.getId()]=node})};Model.prototype._adjustSplitSide=function(node,weight,pixels){node._setWeight(weight);null!=node.getWidth()&&node.getOrientation()===Orientation_1.default.VERT?
node._updateAttrs({width:pixels}):null!=node.getHeight()&&node.getOrientation()===Orientation_1.default.HORZ&&node._updateAttrs({height:pixels})};Model.prototype.toJson=function(){var json={global:{},layout:{}};Model._attributeDefinitions.toJson(json.global,this._attributes);this.visitNodes(function(node){node._fireEvent("save",void 0)});json.borders=this._borders._toJson();json.layout=this._root._toJson();return json};Model.prototype.getSplitterSize=function(){var splitterSize=this._attributes.splitterSize;
-1===splitterSize&&(splitterSize=this._pointerFine?8:12);return splitterSize};Model.prototype.isEnableEdgeDock=function(){return this._attributes.enableEdgeDock};Model.prototype._addNode=function(node){var id=node.getId();if(void 0!==this._idMap[id])throw Error("Error: each node must have a unique id, duplicate id:"+node.getId());"splitter"!==node.getType()&&(this._idMap[id]=node)};Model.prototype._layout=function(rect,metrics){var _a;this._borderRects=this._borders._layoutBorder({outer:rect,inner:rect},
metrics);rect=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets"));null===(_a=this._root)||void 0===_a?void 0:_a.calcMinSize();this._root._layout(rect,metrics);return rect};Model.prototype._findDropTargetNode=function(dragNode,x,y){var node=this._root._findDropTargetNode(dragNode,x,y);void 0===node&&(node=this._borders._findDropTargetNode(dragNode,x,y));return node};Model.prototype._tidy=function(){this._root._tidy()};Model.prototype._updateAttrs=function(json){Model._attributeDefinitions.update(json,
this._attributes)};Model.prototype._nextUniqueId=function(){for(this._nextId++;void 0!==this._idMap["#"+this._nextId];)this._nextId++;return"#"+this._nextId};Model.prototype._getAttribute=function(name){return this._attributes[name]};Model.prototype.setOnAllowDrop=function(onAllowDrop){this._onAllowDrop=onAllowDrop};Model.prototype._getOnAllowDrop=function(){return this._onAllowDrop};Model.prototype.toString=function(){return JSON.stringify(this.toJson())};Model._attributeDefinitions=Model._createAttributeDefinitions();
return Model}();exports.default=global}
//# sourceMappingURL=module$node_modules$flexlayout_react$lib$model$Model.js.map
