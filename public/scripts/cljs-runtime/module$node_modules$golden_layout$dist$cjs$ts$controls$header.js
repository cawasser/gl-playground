shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$controls$header=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Header=void 0;const internal_error_1=require("module$node_modules$golden_layout$dist$cjs$ts$errors$internal_error");global=require("module$node_modules$golden_layout$dist$cjs$ts$utils$event_emitter");const types_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$types"),utils_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$utils"),
header_button_1=require("module$node_modules$golden_layout$dist$cjs$ts$controls$header_button"),tabs_container_1=require("module$node_modules$golden_layout$dist$cjs$ts$controls$tabs_container");class Header extends global.EventEmitter{constructor(_layoutManager,_parent,settings,_configClosable,_getActiveComponentItemEvent,closeEvent,_dockEvent,_popoutEvent,_maximiseToggleEvent,_clickEvent,_touchStartEvent,_componentRemoveEvent,_componentFocusEvent,_componentDragStartEvent){super();this._layoutManager=
_layoutManager;this._parent=_parent;this._configClosable=_configClosable;this._getActiveComponentItemEvent=_getActiveComponentItemEvent;this._dockEvent=_dockEvent;this._popoutEvent=_popoutEvent;this._maximiseToggleEvent=_maximiseToggleEvent;this._clickEvent=_clickEvent;this._touchStartEvent=_touchStartEvent;this._componentRemoveEvent=_componentRemoveEvent;this._componentFocusEvent=_componentFocusEvent;this._componentDragStartEvent=_componentDragStartEvent;this._clickListener=ev=>this.onClick(ev);
this._touchStartListener=ev=>this.onTouchStart(ev);this._rowColumnClosable=!0;this._popoutButton=this._dockButton=this._closeButton=null;this._tabsContainer=new tabs_container_1.TabsContainer(this._layoutManager,item=>this.handleTabInitiatedComponentRemoveEvent(item),item=>this.handleTabInitiatedComponentFocusEvent(item),(x,y,dragListener,item)=>this.handleTabInitiatedDragStartEvent(x,y,dragListener,item),()=>this.processTabDropdownActiveChanged());this._show=settings.show;this._popoutEnabled=settings.popoutEnabled;
this._popoutLabel=settings.popoutLabel;this._dockEnabled=settings.dockEnabled;this._dockLabel=settings.dockLabel;this._maximiseEnabled=settings.maximiseEnabled;this._maximiseLabel=settings.maximiseLabel;this._minimiseEnabled=settings.minimiseEnabled;this._minimiseLabel=settings.minimiseLabel;this._closeEnabled=settings.closeEnabled;this._closeLabel=settings.closeLabel;this._tabDropdownEnabled=settings.tabDropdownEnabled;this._tabDropdownLabel=settings.tabDropdownLabel;this.setSide(settings.side);
this._canRemoveComponent=this._configClosable;this._element=document.createElement("section");this._element.classList.add("lm_header");this._controlsContainerElement=document.createElement("section");this._controlsContainerElement.classList.add("lm_controls");this._element.appendChild(this._tabsContainer.element);this._element.appendChild(this._controlsContainerElement);this._element.appendChild(this._tabsContainer.dropdownElement);this._element.addEventListener("click",this._clickListener,{passive:!0});
this._element.addEventListener("touchstart",this._touchStartListener,{passive:!0});this._documentMouseUpListener=()=>this._tabsContainer.hideAdditionalTabsDropdown();globalThis.document.addEventListener("mouseup",this._documentMouseUpListener,{passive:!0});this._tabControlOffset=this._layoutManager.layoutConfig.settings.tabControlOffset;this._tabDropdownButton=new header_button_1.HeaderButton(this,this._tabDropdownLabel,"lm_tabdropdown",()=>this._tabsContainer.showAdditionalTabsDropdown());this._dockEnabled&&
(this._dockButton=new header_button_1.HeaderButton(this,this._dockLabel,"lm_dock",()=>this.handleButtonDockEvent()));this._popoutEnabled&&(this._popoutButton=new header_button_1.HeaderButton(this,this._popoutLabel,"lm_popout",()=>this.handleButtonPopoutEvent()));this._maximiseEnabled&&(this._maximiseButton=new header_button_1.HeaderButton(this,this._maximiseLabel,"lm_maximise",ev=>this.handleButtonMaximiseToggleEvent(ev)));this._configClosable&&(this._closeButton=new header_button_1.HeaderButton(this,
this._closeLabel,"lm_close",()=>closeEvent()));this.processTabDropdownActiveChanged()}get show(){return this._show}get side(){return this._side}get leftRightSided(){return this._leftRightSided}get dockEnabled(){return this._dockEnabled}get layoutManager(){return this._layoutManager}get parent(){return this._parent}get tabs(){return this._tabsContainer.tabs}get activeContentItem(){const activeComponentItem=this._getActiveComponentItemEvent();return void 0===activeComponentItem?null:activeComponentItem}get element(){return this._element}get tabsContainer(){return this._tabsContainer.element}get tabsContainerElement(){return this._tabsContainer.element}get controlsContainerElement(){return this._controlsContainerElement}get controlsContainer(){return this._controlsContainerElement}destroy(){this.emit("destroy");
this._componentDragStartEvent=this._componentFocusEvent=this._componentRemoveEvent=this._touchStartEvent=this._clickEvent=this._maximiseToggleEvent=this._popoutEvent=this._dockEvent=void 0;this._tabsContainer.destroy();globalThis.document.removeEventListener("mouseup",this._documentMouseUpListener);this._element.remove()}createTab(componentItem,index){this._tabsContainer.createTab(componentItem,index)}removeTab(componentItem){this._tabsContainer.removeTab(componentItem)}processActiveComponentChanged(newActiveComponentItem){this._tabsContainer.processActiveComponentChanged(newActiveComponentItem);
this.updateTabSizes()}setSide(value){this._side=value;this._leftRightSided=[types_1.Side.right,types_1.Side.left].includes(this._side)}setRowColumnClosable(value){this._rowColumnClosable=value;this.updateClosability()}updateClosability(){let isClosable;if(this._configClosable){if(this._rowColumnClosable){isClosable=!0;const len=this.tabs.length;for(let i=0;i<len;i++)if(!this._tabsContainer.tabs[i].componentItem.isClosable){isClosable=!1;break}}else isClosable=!1;null!==this._closeButton&&utils_1.setElementDisplayVisibility(this._closeButton.element,
isClosable)}else isClosable=!1;this._canRemoveComponent=isClosable||1<this._tabsContainer.tabCount}setDockable(isDockable){return null!==this._dockButton&&this._dockEnabled?(utils_1.setElementDisplayVisibility(this._dockButton.element,isDockable),!0):!1}applyFocusedValue(value){value?this._element.classList.add("lm_focused"):this._element.classList.remove("lm_focused")}processMaximised(){if(void 0===this._maximiseButton)throw new internal_error_1.UnexpectedUndefinedError("HPMAX16997");this._maximiseButton.element.setAttribute("title",
this._minimiseLabel)}processMinimised(){if(void 0===this._maximiseButton)throw new internal_error_1.UnexpectedUndefinedError("HPMIN16997");this._maximiseButton.element.setAttribute("title",this._maximiseLabel)}updateTabSizes(){if(0<this._tabsContainer.tabCount){const headerHeight=this._show?this._layoutManager.layoutConfig.dimensions.headerHeight:0;this._leftRightSided?(this._element.style.height="",this._element.style.width=utils_1.numberToPixels(headerHeight)):(this._element.style.width="",this._element.style.height=
utils_1.numberToPixels(headerHeight));this._tabsContainer.updateTabSizes(this._leftRightSided?this._element.offsetHeight-this._controlsContainerElement.offsetHeight-this._tabControlOffset:this._element.offsetWidth-this._controlsContainerElement.offsetWidth-this._tabControlOffset,this._getActiveComponentItemEvent())}}handleTabInitiatedComponentRemoveEvent(componentItem){if(this._canRemoveComponent){if(void 0===this._componentRemoveEvent)throw new internal_error_1.UnexpectedUndefinedError("HHTCE22294");
this._componentRemoveEvent(componentItem)}}handleTabInitiatedComponentFocusEvent(componentItem){if(void 0===this._componentFocusEvent)throw new internal_error_1.UnexpectedUndefinedError("HHTAE22294");this._componentFocusEvent(componentItem)}handleTabInitiatedDragStartEvent(x,y,dragListener,componentItem){if(this._canRemoveComponent){if(void 0===this._componentDragStartEvent)throw new internal_error_1.UnexpectedUndefinedError("HHTDSE22294");this._componentDragStartEvent(x,y,dragListener,componentItem)}else dragListener.cancelDrag()}processTabDropdownActiveChanged(){utils_1.setElementDisplayVisibility(this._tabDropdownButton.element,
this._tabsContainer.dropdownActive)}handleButtonDockEvent(){if(void 0===this._dockEvent)throw new internal_error_1.UnexpectedUndefinedError("HHBDE17834");this._dockEvent()}handleButtonPopoutEvent(){if(this._layoutManager.layoutConfig.settings.popoutWholeStack){if(void 0===this._popoutEvent)throw new internal_error_1.UnexpectedUndefinedError("HHBPOE17834");this._popoutEvent()}else{const activeComponentItem=this._getActiveComponentItemEvent();if(null===activeComponentItem)throw new internal_error_1.UnexpectedNullError("HOPC70222");
activeComponentItem.popout()}}handleButtonMaximiseToggleEvent(ev){if(void 0===this._maximiseToggleEvent)throw new internal_error_1.UnexpectedUndefinedError("HHBMTE16834");this._maximiseToggleEvent()}onClick(event){event.target===this._element&&this.notifyClick(event)}onTouchStart(event){event.target===this._element&&this.notifyTouchStart(event)}notifyClick(ev){if(void 0===this._clickEvent)throw new internal_error_1.UnexpectedUndefinedError("HNHC46834");this._clickEvent(ev)}notifyTouchStart(ev){if(void 0===
this._touchStartEvent)throw new internal_error_1.UnexpectedUndefinedError("HNHTS46834");this._touchStartEvent(ev)}}exports.Header=Header}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$controls$header.js.map
