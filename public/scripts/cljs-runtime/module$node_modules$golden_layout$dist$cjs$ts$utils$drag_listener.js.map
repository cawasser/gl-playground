{
"version":3,
"file":"module$node_modules$golden_layout$dist$cjs$ts$utils$drag_listener.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/golden-layout/dist/cjs/ts/utils/drag-listener.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$golden_layout$dist$cjs$ts$utils$drag_listener\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragListener = void 0;\nconst event_emitter_1 = require(\"./event-emitter\");\n/** @internal */\nclass DragListener extends event_emitter_1.EventEmitter {\n    constructor(_eElement, extraAllowableChildTargets) {\n        super();\n        this._eElement = _eElement;\n        this._pointerTracking = false;\n        this._pointerDownEventListener = (ev) => this.onPointerDown(ev);\n        this._pointerMoveEventListener = (ev) => this.onPointerMove(ev);\n        this._pointerUpEventListener = (ev) => this.onPointerUp(ev);\n        this._timeout = undefined;\n        this._allowableTargets = [_eElement, ...extraAllowableChildTargets];\n        this._oDocument = document;\n        this._eBody = document.body;\n        /**\n         * The delay after which to start the drag in milliseconds\n         * Do NOT make too short (previous value of 200 was not long enough for my touchpad)\n         * Should generally rely on the mouse move to start drag.  Not this delay.\n         */\n        this._nDelay = 1800;\n        /**\n         * The distance the mouse needs to be moved to qualify as a drag\n         * Previous comment: works better with delay only\n         * ???\n         * Probably somehow needs tuning for different devices\n         */\n        this._nDistance = 10;\n        this._nX = 0;\n        this._nY = 0;\n        this._nOriginalX = 0;\n        this._nOriginalY = 0;\n        this._dragging = false;\n        this._eElement.addEventListener('pointerdown', this._pointerDownEventListener, { passive: true });\n    }\n    destroy() {\n        this.checkRemovePointerTrackingEventListeners();\n        this._eElement.removeEventListener('pointerdown', this._pointerDownEventListener);\n    }\n    cancelDrag() {\n        this.processDragStop(undefined);\n    }\n    onPointerDown(oEvent) {\n        if (this._allowableTargets.includes(oEvent.target) && oEvent.isPrimary) {\n            const coordinates = this.getPointerCoordinates(oEvent);\n            this.processPointerDown(coordinates);\n        }\n    }\n    processPointerDown(coordinates) {\n        this._nOriginalX = coordinates.x;\n        this._nOriginalY = coordinates.y;\n        this._oDocument.addEventListener('pointermove', this._pointerMoveEventListener);\n        this._oDocument.addEventListener('pointerup', this._pointerUpEventListener, { passive: true });\n        this._pointerTracking = true;\n        this._timeout = setTimeout(() => {\n            try {\n                this.startDrag();\n            }\n            catch (err) {\n                console.error(err);\n                throw err;\n            }\n        }, this._nDelay);\n    }\n    onPointerMove(oEvent) {\n        if (this._pointerTracking) {\n            this.processDragMove(oEvent);\n            oEvent.preventDefault();\n        }\n    }\n    processDragMove(dragEvent) {\n        this._nX = dragEvent.pageX - this._nOriginalX;\n        this._nY = dragEvent.pageY - this._nOriginalY;\n        if (this._dragging === false) {\n            if (Math.abs(this._nX) > this._nDistance ||\n                Math.abs(this._nY) > this._nDistance) {\n                this.startDrag();\n            }\n        }\n        if (this._dragging) {\n            this.emit('drag', this._nX, this._nY, dragEvent);\n        }\n    }\n    onPointerUp(oEvent) {\n        this.processDragStop(oEvent);\n    }\n    processDragStop(dragEvent) {\n        var _a;\n        if (this._timeout !== undefined) {\n            clearTimeout(this._timeout);\n            this._timeout = undefined;\n        }\n        this.checkRemovePointerTrackingEventListeners();\n        if (this._dragging === true) {\n            this._eBody.classList.remove(\"lm_dragging\" /* Dragging */);\n            this._eElement.classList.remove(\"lm_dragging\" /* Dragging */);\n            (_a = this._oDocument.querySelector('iframe')) === null || _a === void 0 ? void 0 : _a.style.setProperty('pointer-events', '');\n            this._dragging = false;\n            this.emit('dragStop', dragEvent);\n        }\n    }\n    checkRemovePointerTrackingEventListeners() {\n        if (this._pointerTracking) {\n            this._oDocument.removeEventListener('pointermove', this._pointerMoveEventListener);\n            this._oDocument.removeEventListener('pointerup', this._pointerUpEventListener);\n            this._pointerTracking = false;\n        }\n    }\n    startDrag() {\n        var _a;\n        if (this._timeout !== undefined) {\n            clearTimeout(this._timeout);\n            this._timeout = undefined;\n        }\n        this._dragging = true;\n        this._eBody.classList.add(\"lm_dragging\" /* Dragging */);\n        this._eElement.classList.add(\"lm_dragging\" /* Dragging */);\n        (_a = this._oDocument.querySelector('iframe')) === null || _a === void 0 ? void 0 : _a.style.setProperty('pointer-events', 'none');\n        this.emit('dragStart', this._nOriginalX, this._nOriginalY);\n    }\n    getPointerCoordinates(event) {\n        const result = {\n            x: event.pageX,\n            y: event.pageY\n        };\n        return result;\n    }\n}\nexports.DragListener = DragListener;\n//# sourceMappingURL=drag-listener.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","DragListener","event_emitter_1","EventEmitter","_eElement","extraAllowableChildTargets","_pointerTracking","_pointerDownEventListener","ev","this._pointerDownEventListener","onPointerDown","_pointerMoveEventListener","this._pointerMoveEventListener","onPointerMove","_pointerUpEventListener","this._pointerUpEventListener","onPointerUp","_timeout","undefined","_allowableTargets","_oDocument","document","_eBody","body","_nDelay","_nDistance","_nOriginalY","_nOriginalX","_nY","_nX","_dragging","addEventListener","passive","checkRemovePointerTrackingEventListeners","removeEventListener","processDragStop","oEvent","includes","target","isPrimary","coordinates","getPointerCoordinates","processPointerDown","x","y","setTimeout","startDrag","err","console","error","processDragMove","preventDefault","dragEvent","pageX","pageY","Math","abs","emit","_a","clearTimeout","classList","remove","querySelector","style","setProperty","add","event","result"]
}
