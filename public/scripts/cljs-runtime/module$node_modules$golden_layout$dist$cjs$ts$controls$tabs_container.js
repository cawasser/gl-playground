shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$controls$tabs_container=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.TabsContainer=void 0;const internal_error_1=require("module$node_modules$golden_layout$dist$cjs$ts$errors$internal_error"),utils_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$utils"),tab_1=require("module$node_modules$golden_layout$dist$cjs$ts$controls$tab");class TabsContainer{constructor(_layoutManager,
_componentRemoveEvent,_componentFocusEvent,_componentDragStartEvent,_dropdownActiveChangedEvent){this._layoutManager=_layoutManager;this._componentRemoveEvent=_componentRemoveEvent;this._componentFocusEvent=_componentFocusEvent;this._componentDragStartEvent=_componentDragStartEvent;this._dropdownActiveChangedEvent=_dropdownActiveChangedEvent;this._tabs=[];this._lastVisibleTabIndex=-1;this._dropdownActive=!1;this._element=document.createElement("section");this._element.classList.add("lm_tabs");this._dropdownElement=
document.createElement("section");this._dropdownElement.classList.add("lm_tabdropdown_list");this._dropdownElement.style.display="none"}get tabs(){return this._tabs}get tabCount(){return this._tabs.length}get element(){return this._element}get dropdownElement(){return this._dropdownElement}get dropdownActive(){return this._dropdownActive}destroy(){for(let i=0;i<this._tabs.length;i++)this._tabs[i].destroy()}createTab(componentItem,index){for(let i=0;i<this._tabs.length;i++)if(this._tabs[i].componentItem===
componentItem)return;componentItem=new tab_1.Tab(this._layoutManager,componentItem,item=>this.handleTabCloseEvent(item),item=>this.handleTabFocusEvent(item),(x,y,dragListener,item)=>this.handleTabDragStartEvent(x,y,dragListener,item));0===this._tabs.length?(this._tabs.push(componentItem),this._element.appendChild(componentItem.element)):(void 0===index&&(index=this._tabs.length),0<index?this._tabs[index-1].element.insertAdjacentElement("afterend",componentItem.element):this._tabs[0].element.insertAdjacentElement("beforebegin",
componentItem.element),this._tabs.splice(index,0,componentItem))}removeTab(componentItem){for(let i=0;i<this._tabs.length;i++)if(this._tabs[i].componentItem===componentItem){this._tabs[i].destroy();this._tabs.splice(i,1);return}throw Error("contentItem is not controlled by this header");}processActiveComponentChanged(newActiveComponentItem){var activeIndex=-1;for(let i=0;i<this._tabs.length;i++){const isActive=this._tabs[i].componentItem===newActiveComponentItem;this._tabs[i].setActive(isActive);
isActive&&(activeIndex=i)}if(0>activeIndex)throw new internal_error_1.AssertError("HSACI56632");if(this._layoutManager.layoutConfig.settings.reorderOnTabMenuClick&&-1!==this._lastVisibleTabIndex&&activeIndex>this._lastVisibleTabIndex){for(newActiveComponentItem=this._tabs[activeIndex];0<activeIndex;activeIndex--)this._tabs[activeIndex]=this._tabs[activeIndex-1];this._tabs[0]=newActiveComponentItem}}updateTabSizes(availableWidth,activeComponentItem){let dropDownActive=!1;this.tryUpdateTabSizes(dropDownActive,
availableWidth,activeComponentItem)||(dropDownActive=!0,this.tryUpdateTabSizes(dropDownActive,availableWidth,activeComponentItem));dropDownActive!==this._dropdownActive&&(this._dropdownActive=dropDownActive,this._dropdownActiveChangedEvent())}tryUpdateTabSizes(dropdownActive,availableWidth,activeComponentItem){if(0<this._tabs.length){let cumulativeTabWidth=0,tabOverlapAllowanceExceeded=!1;const tabOverlapAllowance=this._layoutManager.layoutConfig.settings.tabOverlapAllowance;activeComponentItem=this._tabs.indexOf(activeComponentItem.tab);
const activeTab=this._tabs[activeComponentItem];this._lastVisibleTabIndex=-1;for(let i=0;i<this._tabs.length;i++){const tabElement=this._tabs[i].element;tabElement.parentElement!==this._element&&this._element.appendChild(tabElement);var tabMarginRightPixels=getComputedStyle(activeTab.element).marginRight;tabMarginRightPixels=utils_1.pixelsToNumber(tabMarginRightPixels);cumulativeTabWidth+=tabElement.offsetWidth+tabMarginRightPixels;activeComponentItem<=i?tabMarginRightPixels=cumulativeTabWidth:(tabMarginRightPixels=
getComputedStyle(activeTab.element).marginRight,tabMarginRightPixels=utils_1.pixelsToNumber(tabMarginRightPixels),tabMarginRightPixels=cumulativeTabWidth+activeTab.element.offsetWidth+tabMarginRightPixels);if(tabMarginRightPixels>availableWidth){if(tabOverlapAllowanceExceeded)i===activeComponentItem&&(tabElement.style.zIndex="auto",tabElement.style.marginLeft="",tabElement.parentElement!==this._element&&this._element.appendChild(tabElement));else if(tabMarginRightPixels=0<activeComponentItem&&activeComponentItem<=
i?(tabMarginRightPixels-availableWidth)/(i-1):(tabMarginRightPixels-availableWidth)/i,tabMarginRightPixels<tabOverlapAllowance){for(let j=0;j<=i;j++){const marginLeft=j!==activeComponentItem&&0!==j?"-"+utils_1.numberToPixels(tabMarginRightPixels):"";this._tabs[j].element.style.zIndex=utils_1.numberToPixels(i-j);this._tabs[j].element.style.marginLeft=marginLeft}this._lastVisibleTabIndex=i;tabElement.parentElement!==this._element&&this._element.appendChild(tabElement)}else tabOverlapAllowanceExceeded=
!0;if(tabOverlapAllowanceExceeded&&i!==activeComponentItem)if(dropdownActive)tabElement.style.zIndex="auto",tabElement.style.marginLeft="",tabElement.parentElement!==this._dropdownElement&&this._dropdownElement.appendChild(tabElement);else return!1}else this._lastVisibleTabIndex=i,tabElement.style.zIndex="auto",tabElement.style.marginLeft="",tabElement.parentElement!==this._element&&this._element.appendChild(tabElement)}}return!0}showAdditionalTabsDropdown(){this._dropdownElement.style.display=""}hideAdditionalTabsDropdown(){this._dropdownElement.style.display=
"none"}handleTabCloseEvent(componentItem){this._componentRemoveEvent(componentItem)}handleTabFocusEvent(componentItem){this._componentFocusEvent(componentItem)}handleTabDragStartEvent(x,y,dragListener,componentItem){this._componentDragStartEvent(x,y,dragListener,componentItem)}}exports.TabsContainer=TabsContainer}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$controls$tabs_container.js.map
