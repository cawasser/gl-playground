shadow$provide.module$node_modules$flexlayout_react$lib$view$TabButton=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.TabButton=void 0;var React=require("module$node_modules$react$index"),I18nLabel_1=require("module$node_modules$flexlayout_react$lib$I18nLabel"),Actions_1=require("module$node_modules$flexlayout_react$lib$model$Actions"),Rect_1=require("module$node_modules$flexlayout_react$lib$Rect"),ICloseType_1=require("module$node_modules$flexlayout_react$lib$model$ICloseType"),
Types_1=require("module$node_modules$flexlayout_react$lib$Types");exports.TabButton=function(props){var layout=props.layout,node=props.node,show=props.show,selected=props.selected,iconFactory=props.iconFactory,titleFactory=props.titleFactory;props=props.icons;var selfRef=React.useRef(null),contentRef=React.useRef(null),contentWidth=React.useRef(0),_a=React.useState(!1),editing=_a[0],setEditing=_a[1];_a=function(event){var message=layout.i18nName(I18nLabel_1.I18nLabel.Move_Tab,node.getName());layout.dragStart(event,
message,node,node.isEnableDrag(),onClick,onDoubleClick)};var onClick=function(){layout.doAction(Actions_1.default.selectTab(node.getId()))},onDoubleClick=function(event){node.isEnableRename()&&(setEditing(!0),layout.getCurrentDocument().body.addEventListener("mousedown",onEndEdit),layout.getCurrentDocument().body.addEventListener("touchstart",onEndEdit))},onEndEdit=function(event){event.target!==contentRef.current&&(setEditing(!1),layout.getCurrentDocument().body.removeEventListener("mousedown",onEndEdit),
layout.getCurrentDocument().body.removeEventListener("touchstart",onEndEdit))},onClose=function(event){event=node.getCloseType();selected||event===ICloseType_1.ICloseType.Always||event===ICloseType_1.ICloseType.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches?layout.doAction(Actions_1.default.deleteTab(node.getId())):onClick()},onCloseMouseDown=function(event){event.stopPropagation()};React.useLayoutEffect(function(){var layoutRect=layout.getDomRect(),r=
selfRef.current.getBoundingClientRect();node._setTabRect(new Rect_1.default(r.left-layoutRect.left,r.top-layoutRect.top,r.width,r.height));contentWidth.current=contentRef.current.getBoundingClientRect().width;editing&&contentRef.current.select()});var onTextBoxMouseDown=function(event){event.stopPropagation()},onTextBoxKeyPress=function(event){27===event.keyCode?setEditing(!1):13===event.keyCode&&(setEditing(!1),layout.doAction(Actions_1.default.renameTab(node.getId(),event.target.value)))},cm=layout.getClassName,
parentNode=node.getParent(),baseClassName=Types_1.CLASSES.FLEXLAYOUT__TAB_BUTTON,classNames=cm(baseClassName);classNames+=" "+cm(baseClassName+"_"+parentNode.getTabLocation());classNames=selected?classNames+(" "+cm(baseClassName+"--selected")):classNames+(" "+cm(baseClassName+"--unselected"));void 0!==node.getClassName()&&(classNames+=" "+node.getClassName());iconFactory=iconFactory?iconFactory(node):void 0;parentNode=(titleFactory?titleFactory(node):void 0)||node.getName();baseClassName=node.getName();
titleFactory=[];parentNode={leading:iconFactory,content:parentNode,name:baseClassName,buttons:titleFactory};layout.customizeTab(node,parentNode);node._setRenderedName(parentNode.name);iconFactory=React.createElement("div",{ref:contentRef,className:cm(Types_1.CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT)},parentNode.content);parentNode=React.createElement("div",{className:cm(Types_1.CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING)},parentNode.leading);editing&&(iconFactory=React.createElement("input",{style:{width:contentWidth+
"px"},ref:contentRef,className:cm(Types_1.CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),type:"text",autoFocus:!0,defaultValue:node.getName(),onKeyDown:onTextBoxKeyPress,onMouseDown:onTextBoxMouseDown,onTouchStart:onTextBoxMouseDown}));node.isEnableClose()&&(onTextBoxMouseDown=layout.i18nName(I18nLabel_1.I18nLabel.Close_Tab),titleFactory.push(React.createElement("div",{key:"close",title:onTextBoxMouseDown,className:cm(Types_1.CLASSES.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:onCloseMouseDown,onClick:onClose,
onTouchStart:onCloseMouseDown},null===props||void 0===props?void 0:props.close)));return React.createElement("div",{ref:selfRef,style:{visibility:show?"visible":"hidden"},className:classNames,onMouseDown:_a,onTouchStart:_a},parentNode,iconFactory,titleFactory)}}
//# sourceMappingURL=module$node_modules$flexlayout_react$lib$view$TabButton.js.map
