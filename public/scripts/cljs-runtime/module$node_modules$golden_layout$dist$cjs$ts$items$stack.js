shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$items$stack=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Stack=void 0;const config_1=require("module$node_modules$golden_layout$dist$cjs$ts$config$config"),resolved_config_1=require("module$node_modules$golden_layout$dist$cjs$ts$config$resolved_config"),header_1=require("module$node_modules$golden_layout$dist$cjs$ts$controls$header"),internal_error_1=require("module$node_modules$golden_layout$dist$cjs$ts$errors$internal_error"),
event_emitter_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$event_emitter"),jquery_legacy_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$jquery_legacy"),types_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$types"),utils_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$utils"),component_item_1=require("module$node_modules$golden_layout$dist$cjs$ts$items$component_item");global=require("module$node_modules$golden_layout$dist$cjs$ts$items$component_parentable_item");
const content_item_1=require("module$node_modules$golden_layout$dist$cjs$ts$items$content_item");class Stack extends global.ComponentParentableItem{constructor(layoutManager,config,_stackParent){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x;super(layoutManager,config,_stackParent,Stack.createElement(document));this._stackParent=_stackParent;this._headerSideChanged=!1;this._elementMouseEnterEventListener=()=>this.onElementMouseEnter();this._elementMouseLeaveEventListener=()=>
this.onElementMouseLeave();this._resizeListener=()=>this.handleResize();this._maximisedListener=()=>this.handleMaximised();this._minimisedListener=()=>this.handleMinimised();this._headerConfig=config.header;_stackParent=layoutManager.layoutConfig.header;var configContent=config.content;configContent=1!==configContent.length?void 0:configContent[0].header;this._initialWantMaximise=config.maximised;this._initialActiveItemIndex=null!==(_a=config.activeItemIndex)&&void 0!==_a?_a:0;_a=null!==(_d=null!==
(_c=null===(_b=this._headerConfig)||void 0===_b?void 0:_b.show)&&void 0!==_c?_c:null===configContent||void 0===configContent?void 0:configContent.show)&&void 0!==_d?_d:_stackParent.show;_b=null!==(_g=null!==(_f=null===(_e=this._headerConfig)||void 0===_e?void 0:_e.popout)&&void 0!==_f?_f:null===configContent||void 0===configContent?void 0:configContent.popout)&&void 0!==_g?_g:_stackParent.popout;_e=null!==(_k=null!==(_j=null===(_h=this._headerConfig)||void 0===_h?void 0:_h.dock)&&void 0!==_j?_j:null===
configContent||void 0===configContent?void 0:configContent.dock)&&void 0!==_k?_k:_stackParent.dock;_h=null!==(_o=null!==(_m=null===(_l=this._headerConfig)||void 0===_l?void 0:_l.maximise)&&void 0!==_m?_m:null===configContent||void 0===configContent?void 0:configContent.maximise)&&void 0!==_o?_o:_stackParent.maximise;_l=null!==(_r=null!==(_q=null===(_p=this._headerConfig)||void 0===_p?void 0:_p.close)&&void 0!==_q?_q:null===configContent||void 0===configContent?void 0:configContent.close)&&void 0!==
_r?_r:_stackParent.close;_p=null!==(_u=null!==(_t=null===(_s=this._headerConfig)||void 0===_s?void 0:_s.minimise)&&void 0!==_t?_t:null===configContent||void 0===configContent?void 0:configContent.minimise)&&void 0!==_u?_u:_stackParent.minimise;_s=null!==(_x=null!==(_w=null===(_v=this._headerConfig)||void 0===_v?void 0:_v.tabDropdown)&&void 0!==_w?_w:null===configContent||void 0===configContent?void 0:configContent.tabDropdown)&&void 0!==_x?_x:_stackParent.tabDropdown;this._maximisedEnabled=!1!==_h;
this._header=new header_1.Header(layoutManager,this,{show:!1!==_a,side:!1===_a?types_1.Side.top:_a,popoutEnabled:!1!==_b,popoutLabel:!1===_b?"":_b,dockEnabled:!1!==_e,dockLabel:!1===_e?"":_e,maximiseEnabled:this._maximisedEnabled,maximiseLabel:!1===_h?"":_h,closeEnabled:!1!==_l,closeLabel:!1===_l?"":_l,minimiseEnabled:!0,minimiseLabel:_p,tabDropdownEnabled:!1!==_s,tabDropdownLabel:!1===_s?"":_s},config.isClosable&&!1!==_l,()=>this.getActiveComponentItem(),()=>this.remove(),()=>this.handleDockEvent(),
()=>this.handlePopoutEvent(),()=>this.toggleMaximise(),ev=>this.handleHeaderClickEvent(ev),ev=>this.handleHeaderTouchStartEvent(ev),item=>this.handleHeaderComponentRemoveEvent(item),item=>this.handleHeaderComponentFocusEvent(item),(x,y,dragListener,item)=>this.handleHeaderComponentStartDragEvent(x,y,dragListener,item));this.isStack=!0;this._childElementContainer=document.createElement("section");this._childElementContainer.classList.add("lm_items");this.on("resize",this._resizeListener);this._maximisedEnabled&&
(this.on("maximised",this._maximisedListener),this.on("minimised",this._minimisedListener));this.element.addEventListener("mouseenter",this._elementMouseEnterEventListener,{passive:!0});this.element.addEventListener("mouseleave",this._elementMouseLeaveEventListener,{passive:!0});this.element.appendChild(this._header.element);this.element.appendChild(this._childElementContainer);this.setUndocked();this.setupHeaderPosition();this._header.updateClosability()}get childElementContainer(){return this._childElementContainer}get headerShow(){return this._header.show}get headerSide(){return this._header.side}get headerLeftRightSided(){return this._header.leftRightSided}get dockEnabled(){return this._header.dockEnabled}get docker(){return this._docker}get contentAreaDimensions(){return this._contentAreaDimensions}get initialWantMaximise(){return this._initialWantMaximise}get isMaximised(){return this===
this.layoutManager.maximisedStack}dock(mode){this._header.dockEnabled&&(this._stackParent.isColumn||this._stackParent.isColumn)&&this._stackParent.dock(this,mode)}updateSize(){this.updateNodeSize();this.updateContentItemsSize()}init(){if(!0!==this.isInitialised){this.updateNodeSize();for(var i$jscomp$0=0;i$jscomp$0<this.contentItems.length;i$jscomp$0++)this._childElementContainer.appendChild(this.contentItems[i$jscomp$0].element);super.init();i$jscomp$0=this.contentItems;var contentItemCount=i$jscomp$0.length;
if(0<contentItemCount){if(0>this._initialActiveItemIndex||this._initialActiveItemIndex>=contentItemCount)throw Error(`ActiveItemIndex out of range: ${this._initialActiveItemIndex} id: ${this.id}`);for(let i=0;i<contentItemCount;i++){const contentItem=i$jscomp$0[i];if(contentItem instanceof component_item_1.ComponentItem)this._header.createTab(contentItem,i),contentItem.hide();else throw Error(`Stack Content Item is not of type ComponentItem: ${i} id: ${this.id}`);}this.setActiveComponentItem(i$jscomp$0[this._initialActiveItemIndex],
!1);this._header.updateTabSizes()}this._header.updateClosability();(this._stackParent.isRow||this._stackParent.isColumn)&&this._stackParent.validateDocking();this.initContentItems()}}setActiveContentItem(item){if(content_item_1.ContentItem.isComponentItem(item))this.setActiveComponentItem(item,!1);else throw Error("Stack.setActiveContentItem: item is not a ComponentItem");}setActiveComponentItem(componentItem,focus,suppressFocusEvent=!1){if(this._activeComponentItem!==componentItem){if(-1===this.contentItems.indexOf(componentItem))throw Error("componentItem is not a child of this stack");
void 0!==this._activeComponentItem&&this._activeComponentItem.hide();this._activeComponentItem=componentItem;this._header.processActiveComponentChanged(componentItem);componentItem.show();this.emit("activeContentItemChanged",componentItem);this.layoutManager.emit("activeContentItemChanged",componentItem);this.emitStateChangedEvent()}(this.focused||focus)&&this.layoutManager.setFocusedComponentItem(componentItem,suppressFocusEvent)}getActiveContentItem(){let result;result=this.getActiveComponentItem();
void 0===result&&(result=null);return result}getActiveComponentItem(){return this._activeComponentItem}focusActiveContentItem(){this._activeComponentItem.focus()}setFocusedValue(value){this._header.applyFocusedValue(value);super.setFocusedValue(value)}setDocked(value){if(value.docked)this._docker=value;else throw new internal_error_1.AssertError("SSD3396");}setUndocked(){this._docker={docked:!1,dimension:"width",size:0,realSize:0}}setDockable(value){this._header.setDockable(value)}setRowColumnClosable(value){this._header.setRowColumnClosable(value)}newComponent(componentType,
componentState,title,index){return this.newItem({type:"component",componentType,componentState,title},index)}addComponent(componentType,componentState,title,index){return this.addItem({type:"component",componentType,componentState,title},index)}newItem(itemConfig,index){index=this.addItem(itemConfig,index);return this.contentItems[index]}addItem(itemConfig,index){this.layoutManager.checkMinimiseMaximisedStack();itemConfig=config_1.ItemConfig.resolve(itemConfig);itemConfig=this.layoutManager.createAndInitContentItem(itemConfig,
this);return this.addChild(itemConfig,index)}addChild(contentItem,index,focus=!1){if(void 0!==index&&index>this.contentItems.length)throw new internal_error_1.AssertError("SAC99728");if(contentItem instanceof component_item_1.ComponentItem)return index=super.addChild(contentItem,index),this._childElementContainer.appendChild(contentItem.element),this._header.createTab(contentItem,index),this.setActiveComponentItem(contentItem,focus),this._header.updateTabSizes(),this.updateSize(),this._header.updateClosability(),
(this._stackParent.isRow||this._stackParent.isColumn)&&this._stackParent.validateDocking(),this.emitStateChangedEvent(),index;throw new internal_error_1.AssertError("SACC88532");}removeChild(contentItem,keepChild){const index=this.contentItems.indexOf(contentItem),stackWillBeDeleted=1===this.contentItems.length;this._activeComponentItem===contentItem&&(contentItem.focused&&contentItem.blur(),stackWillBeDeleted||this.setActiveComponentItem(this.contentItems[0===index?1:index-1],!1));this._header.removeTab(contentItem);
super.removeChild(contentItem,keepChild);stackWillBeDeleted||(this._header.updateClosability(),(this._stackParent.isRow||this._stackParent.isColumn)&&this._stackParent.validateDocking());this.emitStateChangedEvent()}toggleMaximise(){this.isMaximised?this.minimise():this.maximise()}maximise(){this.isMaximised||(this.dock(!1),this.layoutManager.setMaximisedStack(this),this.emitStateChangedEvent())}minimise(){this.isMaximised&&(this.layoutManager.setMaximisedStack(void 0),this.emitStateChangedEvent())}destroy(){this._activeComponentItem.focused&&
this._activeComponentItem.blur();super.destroy();this.off("resize",this._resizeListener);this._maximisedEnabled&&(this.off("maximised",this._maximisedListener),this.off("minimised",this._minimisedListener));this.element.removeEventListener("mouseenter",this._elementMouseEnterEventListener);this.element.removeEventListener("mouseleave",this._elementMouseLeaveEventListener);this._header.destroy()}toConfig(){const activeItemIndex=this.contentItems.indexOf(this._activeComponentItem);if(0>activeItemIndex)throw new internal_error_1.AssertError("STC69221");
return{type:"stack",content:this.calculateConfigContent(),width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,id:this.id,isClosable:this.isClosable,maximised:this.isMaximised,header:this.createHeaderConfig(),activeItemIndex}}onDrop(contentItem,area){if("header"===this._dropSegment){this.resetHeaderDropZone();if(void 0===this._dropIndex)throw new internal_error_1.UnexpectedUndefinedError("SODDI68990");this.addChild(contentItem,this._dropIndex)}else if("body"===this._dropSegment)this.addChild(contentItem,
0,!0);else{var isVertical="top"===this._dropSegment||"bottom"===this._dropSegment,isHorizontal="left"===this._dropSegment||"right"===this._dropSegment;area="top"===this._dropSegment||"left"===this._dropSegment;var hasCorrectParent=isVertical&&this._stackParent.isColumn||isHorizontal&&this._stackParent.isRow;isHorizontal=isVertical?"height":"width";if(contentItem.isComponent){var itemConfig=resolved_config_1.ResolvedStackItemConfig.createDefault();itemConfig.header=this.createHeaderConfig();itemConfig=
this.layoutManager.createAndInitContentItem(itemConfig,this);itemConfig.addChild(contentItem);contentItem=itemConfig}if(contentItem.type===types_1.ItemType.row||contentItem.type===types_1.ItemType.column)itemConfig=resolved_config_1.ResolvedStackItemConfig.createDefault(),itemConfig.header=this.createHeaderConfig(),itemConfig=this.layoutManager.createContentItem(itemConfig,this),itemConfig.addChild(contentItem),contentItem=itemConfig;hasCorrectParent?(isVertical=this._stackParent.contentItems.indexOf(this),
this._stackParent.addChild(contentItem,area?isVertical:isVertical+1,!0),this[isHorizontal]*=.5,contentItem[isHorizontal]=this[isHorizontal],this._stackParent.updateSize()):(isVertical=resolved_config_1.ResolvedItemConfig.createDefault(isVertical?types_1.ItemType.column:types_1.ItemType.row),isVertical=this.layoutManager.createContentItem(isVertical,this),this._stackParent.replaceChild(this,isVertical),isVertical.addChild(contentItem,area?0:void 0,!0),isVertical.addChild(this,area?void 0:0,!0),this[isHorizontal]=
50,contentItem[isHorizontal]=50,isVertical.updateSize());this._stackParent.validateDocking()}}highlightDropZone(x,y){for(const key in this._contentAreaDimensions){const segment=key,area=this._contentAreaDimensions[segment].hoverArea;if(area.x1<x&&area.x2>x&&area.y1<y&&area.y2>y){"header"===segment?(this._dropSegment="header",this.highlightHeaderDropZone(this._header.leftRightSided?y:x)):(this.resetHeaderDropZone(),this.highlightBodyDropZone(segment));break}}}getArea(){if("none"===this.element.style.display)return null;
const headerArea=super.getElementArea(this._header.element),contentArea=super.getElementArea(this._childElementContainer);if(null===headerArea||null===contentArea)throw new internal_error_1.UnexpectedNullError("SGAHC13086");const contentWidth=contentArea.x2-contentArea.x1,contentHeight=contentArea.y2-contentArea.y1;this._contentAreaDimensions={header:{hoverArea:{x1:headerArea.x1,y1:headerArea.y1,x2:headerArea.x2,y2:headerArea.y2},highlightArea:{x1:headerArea.x1,y1:headerArea.y1,x2:headerArea.x2,y2:headerArea.y2}}};
0===this.contentItems.length?this._contentAreaDimensions.body={hoverArea:{x1:contentArea.x1,y1:contentArea.y1,x2:contentArea.x2,y2:contentArea.y2},highlightArea:{x1:contentArea.x1,y1:contentArea.y1,x2:contentArea.x2,y2:contentArea.y2}}:(this._contentAreaDimensions.left={hoverArea:{x1:contentArea.x1,y1:contentArea.y1,x2:contentArea.x1+.25*contentWidth,y2:contentArea.y2},highlightArea:{x1:contentArea.x1,y1:contentArea.y1,x2:contentArea.x1+.5*contentWidth,y2:contentArea.y2}},this._contentAreaDimensions.top=
{hoverArea:{x1:contentArea.x1+.25*contentWidth,y1:contentArea.y1,x2:contentArea.x1+.75*contentWidth,y2:contentArea.y1+.5*contentHeight},highlightArea:{x1:contentArea.x1,y1:contentArea.y1,x2:contentArea.x2,y2:contentArea.y1+.5*contentHeight}},this._contentAreaDimensions.right={hoverArea:{x1:contentArea.x1+.75*contentWidth,y1:contentArea.y1,x2:contentArea.x2,y2:contentArea.y2},highlightArea:{x1:contentArea.x1+.5*contentWidth,y1:contentArea.y1,x2:contentArea.x2,y2:contentArea.y2}},this._contentAreaDimensions.bottom=
{hoverArea:{x1:contentArea.x1+.25*contentWidth,y1:contentArea.y1+.5*contentHeight,x2:contentArea.x1+.75*contentWidth,y2:contentArea.y2},highlightArea:{x1:contentArea.x1,y1:contentArea.y1+.5*contentHeight,x2:contentArea.x2,y2:contentArea.y2}});return super.getElementArea(this.element)}positionHeader(position){if(this._docker.docked)throw Error("Can't change header position in docked stack");this._header.side!==position&&(this._header.setSide(position),this._headerSideChanged=!0,this.setupHeaderPosition())}setParent(parent){this._stackParent=
parent;super.setParent(parent)}updateNodeSize(){if("none"!==this.element.style.display){var isDocked=this._docker.docked;const content=utils_1.getElementWidthAndHeight(this.element);this._header.show&&(content[this._header.leftRightSided?types_1.WidthOrHeightPropertyName.width:types_1.WidthOrHeightPropertyName.height]-=this.layoutManager.layoutConfig.dimensions.headerHeight);isDocked&&(content[this._docker.dimension]=this._docker.realSize);isDocked&&this._docker.dimension!==types_1.WidthOrHeightPropertyName.height||
(this._childElementContainer.style.width=utils_1.numberToPixels(content.width));isDocked&&this._docker.dimension!==types_1.WidthOrHeightPropertyName.width||(this._childElementContainer.style.height=utils_1.numberToPixels(content.height));for(isDocked=0;isDocked<this.contentItems.length;isDocked++)this.contentItems[isDocked].element.style.width=utils_1.numberToPixels(content.width),this.contentItems[isDocked].element.style.height=utils_1.numberToPixels(content.height);this.emit("resize");this.emitStateChangedEvent()}}highlightHeaderDropZone(x){var tabsLength=
this._header.tabs.length;const dropTargetIndicator=this.layoutManager.dropTargetIndicator;if(null===dropTargetIndicator)throw new internal_error_1.UnexpectedNullError("SHHDZDTI97110");if(0===tabsLength){var area=jquery_legacy_1.getJQueryOffset(this._header.element);var elementHeight=utils_1.getElementHeight(this._header.element);area={x1:area.left,x2:area.left+100,y1:area.top+elementHeight-20,y2:area.top+elementHeight}}else{let tabIndex=0,isAboveTab=!1,tabLeft,tabWidth;do area=this._header.tabs[tabIndex].element,
elementHeight=jquery_legacy_1.getJQueryOffset(area),this._header.leftRightSided?(tabLeft=elementHeight.top,elementHeight=elementHeight.left,tabWidth=utils_1.getElementHeight(area)):(tabLeft=elementHeight.left,elementHeight=elementHeight.top,tabWidth=utils_1.getElementWidth(area)),x>tabLeft&&x<tabLeft+tabWidth?isAboveTab=!0:tabIndex++;while(tabIndex<tabsLength&&!isAboveTab);if(!1===isAboveTab&&x<tabLeft)return;x<tabLeft+tabWidth/2?(this._dropIndex=tabIndex,area.insertAdjacentElement("beforebegin",
this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(tabIndex+1,tabsLength),area.insertAdjacentElement("afterend",this.layoutManager.tabDropPlaceholder));tabsLength=jquery_legacy_1.getJQueryOffset(this.layoutManager.tabDropPlaceholder);x=utils_1.getElementWidth(this.layoutManager.tabDropPlaceholder);this._header.leftRightSided?(tabsLength=tabsLength.top,area={x1:elementHeight,x2:elementHeight+area.clientHeight,y1:tabsLength,y2:tabsLength+x}):(tabsLength=tabsLength.left,area={x1:tabsLength,
x2:tabsLength+x,y1:elementHeight,y2:elementHeight+area.clientHeight})}dropTargetIndicator.highlightArea(area)}resetHeaderDropZone(){this.layoutManager.tabDropPlaceholder.remove()}setupHeaderPosition(){utils_1.setElementDisplayVisibility(this._header.element,this._header.show);this.element.classList.remove("lm_left","lm_right","lm_bottom");this._header.leftRightSided&&this.element.classList.add("lm_"+this._header.side);this.updateSize()}highlightBodyDropZone(segment){if(void 0===this._contentAreaDimensions)throw new internal_error_1.UnexpectedUndefinedError("SHBDZC82265");
{const highlightArea=this._contentAreaDimensions[segment].highlightArea,dropTargetIndicator=this.layoutManager.dropTargetIndicator;if(null===dropTargetIndicator)throw new internal_error_1.UnexpectedNullError("SHBDZD96110");dropTargetIndicator.highlightArea(highlightArea);this._dropSegment=segment}}handleResize(){this._header.updateTabSizes()}handleMaximised(){this._header.processMaximised()}handleMinimised(){this._header.processMinimised()}onElementMouseEnter(){this._docker.docked&&(this._childElementContainer.style[this._docker.dimension]=
utils_1.numberToPixels(this._docker.realSize))}onElementMouseLeave(){this._docker.docked&&(this._childElementContainer.style[this._docker.dimension]=utils_1.numberToPixels(0))}handleDockEvent(){this.dock()}handlePopoutEvent(){this.popout()}handleHeaderClickEvent(ev){const eventName=event_emitter_1.EventEmitter.headerClickEventName;ev=new event_emitter_1.EventEmitter.ClickBubblingEvent(eventName,this,ev);this.emit(eventName,ev)}handleHeaderTouchStartEvent(ev){const eventName=event_emitter_1.EventEmitter.headerTouchStartEventName;
ev=new event_emitter_1.EventEmitter.TouchStartBubblingEvent(eventName,this,ev);this.emit(eventName,ev)}handleHeaderComponentRemoveEvent(item){this.removeChild(item,!1)}handleHeaderComponentFocusEvent(item){this.setActiveComponentItem(item,!0)}handleHeaderComponentStartDragEvent(x,y,dragListener,componentItem){!0===this.isMaximised&&this.toggleMaximise();this.layoutManager.startComponentDrag(x,y,dragListener,componentItem,this)}createHeaderConfig(){if(this._headerSideChanged){const show=this._header.show?
this._header.side:!1;let result=resolved_config_1.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig,show);void 0===result&&(result={show,popout:void 0,dock:void 0,maximise:void 0,close:void 0,minimise:void 0,tabDropdown:void 0});return result}return resolved_config_1.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig)}emitStateChangedEvent(){this.emitBaseBubblingEvent("stateChanged")}}exports.Stack=Stack;(function(Stack){Stack.createElement=function(document){document=document.createElement("div");
document.classList.add("lm_item");document.classList.add("lm_stack");return document}})(Stack=exports.Stack||(exports.Stack={}))}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$items$stack.js.map
