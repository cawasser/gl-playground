shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$utils$drag_listener=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DragListener=void 0;global=require("module$node_modules$golden_layout$dist$cjs$ts$utils$event_emitter");class DragListener extends global.EventEmitter{constructor(_eElement,extraAllowableChildTargets){super();this._eElement=_eElement;this._pointerTracking=!1;this._pointerDownEventListener=ev=>this.onPointerDown(ev);
this._pointerMoveEventListener=ev=>this.onPointerMove(ev);this._pointerUpEventListener=ev=>this.onPointerUp(ev);this._timeout=void 0;this._allowableTargets=[_eElement,...extraAllowableChildTargets];this._oDocument=document;this._eBody=document.body;this._nDelay=1800;this._nDistance=10;this._nOriginalY=this._nOriginalX=this._nY=this._nX=0;this._dragging=!1;this._eElement.addEventListener("pointerdown",this._pointerDownEventListener,{passive:!0})}destroy(){this.checkRemovePointerTrackingEventListeners();
this._eElement.removeEventListener("pointerdown",this._pointerDownEventListener)}cancelDrag(){this.processDragStop(void 0)}onPointerDown(oEvent){this._allowableTargets.includes(oEvent.target)&&oEvent.isPrimary&&(oEvent=this.getPointerCoordinates(oEvent),this.processPointerDown(oEvent))}processPointerDown(coordinates){this._nOriginalX=coordinates.x;this._nOriginalY=coordinates.y;this._oDocument.addEventListener("pointermove",this._pointerMoveEventListener);this._oDocument.addEventListener("pointerup",
this._pointerUpEventListener,{passive:!0});this._pointerTracking=!0;this._timeout=setTimeout(()=>{try{this.startDrag()}catch(err){throw console.error(err),err;}},this._nDelay)}onPointerMove(oEvent){this._pointerTracking&&(this.processDragMove(oEvent),oEvent.preventDefault())}processDragMove(dragEvent){this._nX=dragEvent.pageX-this._nOriginalX;this._nY=dragEvent.pageY-this._nOriginalY;!1===this._dragging&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&this.startDrag();this._dragging&&
this.emit("drag",this._nX,this._nY,dragEvent)}onPointerUp(oEvent){this.processDragStop(oEvent)}processDragStop(dragEvent){var _a;void 0!==this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0);this.checkRemovePointerTrackingEventListeners();!0===this._dragging&&(this._eBody.classList.remove("lm_dragging"),this._eElement.classList.remove("lm_dragging"),null===(_a=this._oDocument.querySelector("iframe"))||void 0===_a?void 0:_a.style.setProperty("pointer-events",""),this._dragging=!1,this.emit("dragStop",
dragEvent))}checkRemovePointerTrackingEventListeners(){this._pointerTracking&&(this._oDocument.removeEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.removeEventListener("pointerup",this._pointerUpEventListener),this._pointerTracking=!1)}startDrag(){var _a;void 0!==this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0);this._dragging=!0;this._eBody.classList.add("lm_dragging");this._eElement.classList.add("lm_dragging");null===(_a=this._oDocument.querySelector("iframe"))||
void 0===_a?void 0:_a.style.setProperty("pointer-events","none");this.emit("dragStart",this._nOriginalX,this._nOriginalY)}getPointerCoordinates(event){return{x:event.pageX,y:event.pageY}}}exports.DragListener=DragListener}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$utils$drag_listener.js.map
