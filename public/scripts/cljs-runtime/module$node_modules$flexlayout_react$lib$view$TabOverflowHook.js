shadow$provide.module$node_modules$flexlayout_react$lib$view$TabOverflowHook=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.useTabOverflow=void 0;var React=require("module$node_modules$react$index"),Rect_1=require("module$node_modules$flexlayout_react$lib$Rect"),TabSetNode_1=require("module$node_modules$flexlayout_react$lib$model$TabSetNode"),Orientation_1=require("module$node_modules$flexlayout_react$lib$Orientation");exports.useTabOverflow=
function(node,orientation,toolbarRef){var firstRender=React.useRef(!0),lastRect=React.useRef(new Rect_1.default(0,0,0,0)),selfRef=React.useRef(null),_a=React.useState(0),position=_a[0],setPosition=_a[1],userControlledLeft=React.useRef(!1);_a=React.useState([]);var hiddenTabs=_a[0],setHiddenTabs=_a[1];React.useLayoutEffect(function(){userControlledLeft.current=!1},[node.getSelectedNode(),node.getRect().width,node.getRect().height]);React.useLayoutEffect(function(){var nodeRect=node instanceof TabSetNode_1.default?
node.getRect():node.getTabHeaderRect(),lastChild=node.getChildren()[node.getChildren().length-1];if(!0===firstRender.current||nodeRect.width!==lastRect.current.width||nodeRect.height!==lastRect.current.height){lastRect.current=nodeRect;var enabled=node instanceof TabSetNode_1.default?!0===node.isEnableTabStrip():!0,endPos=getFar(nodeRect)-getSize(toolbarRef.current.getBoundingClientRect());if(enabled&&0<node.getChildren().length&&!(0===hiddenTabs.length&&0===position&&getFar(lastChild.getTabRect())+
2<endPos)){endPos-=0<hiddenTabs.length?orientation===Orientation_1.default.HORZ?10:0:45;enabled=0;var selectedTab=node.getSelectedNode();if(selectedTab&&!userControlledLeft.current){selectedTab=selectedTab.getTabRect();var selectedStart=getNear(selectedTab)-2,selectedEnd=getFar(selectedTab)+2;if(getSize(selectedTab)+4>=endPos-getNear(nodeRect))enabled=getNear(nodeRect)-selectedStart;else if(selectedEnd>endPos||selectedStart<getNear(nodeRect))selectedStart<getNear(nodeRect)&&(enabled=getNear(nodeRect)-
selectedStart),selectedEnd+enabled>endPos&&(enabled=endPos-selectedEnd)}lastChild=Math.max(0,endPos-(getFar(lastChild.getTabRect())+2+enabled));lastChild=Math.min(0,position+enabled+lastChild);enabled=lastChild-position;selectedTab=[];for(selectedStart=0;selectedStart<node.getChildren().length;selectedStart++)selectedEnd=node.getChildren()[selectedStart],(getNear(selectedEnd.getTabRect())+enabled<getNear(nodeRect)||getFar(selectedEnd.getTabRect())+enabled>endPos)&&selectedTab.push({node:selectedEnd,
index:selectedStart});firstRender.current=!1;setHiddenTabs(selectedTab);setPosition(lastChild)}}else firstRender.current=!0});React.useEffect(function(){var instance=selfRef.current;instance.addEventListener("wheel",onWheel);return function(){instance.removeEventListener("wheel",onWheel)}},[]);var onWheel=function(event){event.preventDefault()},getNear=function(rect){return orientation===Orientation_1.default.HORZ?rect.x:rect.y},getFar=function(rect){return orientation===Orientation_1.default.HORZ?
rect.getRight():rect.getBottom()},getSize=function(rect){return orientation===Orientation_1.default.HORZ?rect.width:rect.height};return{selfRef,position,userControlledLeft,hiddenTabs,onMouseWheel:function(event){var delta=Math.abs(event.deltaX)>Math.abs(event.deltaY)?-event.deltaX:-event.deltaY;1===event.deltaMode&&(delta*=40);setPosition(position+delta);userControlledLeft.current=!0;event.stopPropagation()}}}}
//# sourceMappingURL=module$node_modules$flexlayout_react$lib$view$TabOverflowHook.js.map
