shadow$provide.module$node_modules$golden_layout$dist$cjs$ts$items$content_item=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ContentItem=void 0;const internal_error_1=require("module$node_modules$golden_layout$dist$cjs$ts$errors$internal_error"),event_emitter_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$event_emitter"),jquery_legacy_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$jquery_legacy"),utils_1=require("module$node_modules$golden_layout$dist$cjs$ts$utils$utils");
class ContentItem extends event_emitter_1.EventEmitter{constructor(layoutManager,config,_parent,_element){super();this.layoutManager=layoutManager;this._parent=_parent;this._element=_element;this._popInParentIds=[];this._type=config.type;this._id=config.id;this.isComponent=this.isStack=this.isColumn=this.isRow=this.isGround=this._isInitialised=!1;this.width=config.width;this.minWidth=config.minWidth;this.height=config.height;this.minHeight=config.minHeight;this._isClosable=config.isClosable;this._pendingEventPropagations=
{};this._throttledEvents=["stateChanged"];this._contentItems=this.createContentItems(config.content)}get type(){return this._type}get id(){return this._id}get popInParentIds(){return this._popInParentIds}get parent(){return this._parent}get contentItems(){return this._contentItems}get isClosable(){return this._isClosable}get element(){return this._element}get isInitialised(){return this._isInitialised}static isStack(item){return item.isStack}static isComponentItem(item){return item.isComponent}static isComponentParentableItem(item){return item.isStack||
item.isGround}removeChild(contentItem,keepChild=!1){contentItem=this._contentItems.indexOf(contentItem);if(-1===contentItem)throw Error("Can't remove child item. Unknown content item");keepChild||this._contentItems[contentItem].destroy();this._contentItems.splice(contentItem,1);if(0<this._contentItems.length)this.updateSize();else if(!this.isGround&&!0===this._isClosable){if(null===this._parent)throw new internal_error_1.UnexpectedNullError("CIUC00874");this._parent.removeChild(this)}}addChild(contentItem,
index,suspendResize){null!==index&&void 0!==index?index:index=this._contentItems.length;this._contentItems.splice(index,0,contentItem);contentItem.setParent(this);!0===this._isInitialised&&!1===contentItem._isInitialised&&contentItem.init();return index}replaceChild(oldChild,newChild,destroyOldChild=!1){const index=this._contentItems.indexOf(oldChild),parentNode=oldChild._element.parentNode;if(-1===index)throw new internal_error_1.AssertError("CIRCI23232","Can't replace child. oldChild is not child of this");
if(null===parentNode)throw new internal_error_1.UnexpectedNullError("CIRCP23232");parentNode.replaceChild(newChild._element,oldChild._element);!0===destroyOldChild&&(oldChild._parent=null,oldChild.destroy());this._contentItems[index]=newChild;newChild.setParent(this);newChild.height=oldChild.height;newChild.width=oldChild.width;if(null===newChild._parent)throw new internal_error_1.UnexpectedNullError("CIRCNC45699");!0===newChild._parent._isInitialised&&!1===newChild._isInitialised&&newChild.init();
this.updateSize()}remove(){if(null===this._parent)throw new internal_error_1.UnexpectedNullError("CIR11110");this._parent.removeChild(this)}popout(){var parentId=utils_1.getUniqueId();parentId=this.layoutManager.createPopoutFromContentItem(this,void 0,parentId,void 0);this.emitBaseBubblingEvent("stateChanged");return parentId}calculateConfigContent(){const contentItems=this._contentItems,count=contentItems.length,result=Array(count);for(let i=0;i<count;i++)result[i]=contentItems[i].toConfig();return result}highlightDropZone(x,
y,area){x=this.layoutManager.dropTargetIndicator;if(null===x)throw new internal_error_1.UnexpectedNullError("ACIHDZ5593");x.highlightArea(area)}onDrop(contentItem,area){this.addChild(contentItem)}show(){utils_1.setElementDisplayVisibility(this._element,!0);this.layoutManager.updateSizeFromContainer();for(let i=0;i<this._contentItems.length;i++)this._contentItems[i].show()}destroy(){for(let i=0;i<this._contentItems.length;i++)this._contentItems[i].destroy();this._contentItems=[];this.emitBaseBubblingEvent("beforeItemDestroyed");
this._element.remove();this.emitBaseBubblingEvent("itemDestroyed")}getElementArea(element){element=null!==element&&void 0!==element?element:this._element;const offset=jquery_legacy_1.getJQueryOffset(element),width=element.offsetWidth;element=element.offsetHeight;return{x1:offset.left+1,y1:offset.top+1,x2:offset.left+width-1,y2:offset.top+element-1,surface:width*element,contentItem:this}}init(){this._isInitialised=!0;this.emitBaseBubblingEvent("itemCreated");this.emitUnknownBubblingEvent(this.type+
"Created")}setParent(parent){this._parent=parent}addPopInParentId(id){this.popInParentIds.includes(id)||this.popInParentIds.push(id)}initContentItems(){for(let i=0;i<this._contentItems.length;i++)this._contentItems[i].init()}hide(){utils_1.setElementDisplayVisibility(this._element,!1);this.layoutManager.updateSizeFromContainer()}updateContentItemsSize(){for(let i=0;i<this._contentItems.length;i++)this._contentItems[i].updateSize()}createContentItems(content){const result=Array(content.length);for(let i=
0;i<content.length;i++)result[i]=this.layoutManager.createContentItem(content[i],this);return result}propagateEvent(name,args){1===args.length&&(args=args[0],args instanceof event_emitter_1.EventEmitter.BubblingEvent&&!1===args.isPropagationStopped&&!0===this._isInitialised&&(!1===this.isGround&&this._parent?this._parent.emitUnknown(name,args):this.scheduleEventPropagationToLayoutManager(name,args)))}tryBubbleEvent(name,args){1===args.length&&(args=args[0],args instanceof event_emitter_1.EventEmitter.BubblingEvent&&
!1===args.isPropagationStopped&&!0===this._isInitialised&&(!1===this.isGround&&this._parent?this._parent.emitUnknown(name,args):this.scheduleEventPropagationToLayoutManager(name,args)))}scheduleEventPropagationToLayoutManager(name,event){-1===this._throttledEvents.indexOf(name)?this.layoutManager.emitUnknown(name,event):!0!==this._pendingEventPropagations[name]&&(this._pendingEventPropagations[name]=!0,globalThis.requestAnimationFrame(()=>this.propagateEventToLayoutManager(name,event)))}propagateEventToLayoutManager(name,
event){this._pendingEventPropagations[name]=!1;this.layoutManager.emitUnknown(name,event)}}exports.ContentItem=ContentItem}
//# sourceMappingURL=module$node_modules$golden_layout$dist$cjs$ts$items$content_item.js.map
