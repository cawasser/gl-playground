shadow$provide.module$node_modules$flexlayout_react$lib$model$BorderNode=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,
b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Attribute_1=require("module$node_modules$flexlayout_react$lib$Attribute"),AttributeDefinitions_1=require("module$node_modules$flexlayout_react$lib$AttributeDefinitions"),DockLocation_1=require("module$node_modules$flexlayout_react$lib$DockLocation"),DropInfo_1=require("module$node_modules$flexlayout_react$lib$DropInfo"),Orientation_1=require("module$node_modules$flexlayout_react$lib$Orientation"),
Rect_1=require("module$node_modules$flexlayout_react$lib$Rect");global=require("module$node_modules$flexlayout_react$lib$model$Node");var SplitterNode_1=require("module$node_modules$flexlayout_react$lib$model$SplitterNode"),TabNode_1=require("module$node_modules$flexlayout_react$lib$model$TabNode"),Utils_1=require("module$node_modules$flexlayout_react$lib$model$Utils");require=function(_super){function BorderNode(location,json,model){var _this=_super.call(this,model)||this;_this._adjustedSize=0;_this._calculatedBorderBarSize=
0;_this._location=location;_this._drawChildren=[];_this._attributes.id="border_"+location.getName();BorderNode._attributeDefinitions.fromJson(json,_this._attributes);model._addNode(_this);return _this}__extends(BorderNode,_super);BorderNode._fromJson=function(json,model){var location=DockLocation_1.default.getByName(json.location),border=new BorderNode(location,json,model);json.children&&(border._children=json.children.map(function(jsonChild){jsonChild=TabNode_1.default._fromJson(jsonChild,model);
jsonChild._setParent(border);return jsonChild}));return border};BorderNode._createAttributeDefinitions=function(){var attributeDefinitions=new AttributeDefinitions_1.default;attributeDefinitions.add("type",BorderNode.TYPE,!0);attributeDefinitions.add("selected",-1);attributeDefinitions.add("show",!0).setType(Attribute_1.default.BOOLEAN);attributeDefinitions.addInherited("barSize","borderBarSize").setType(Attribute_1.default.INT).setFrom(0);attributeDefinitions.addInherited("enableDrop","borderEnableDrop").setType(Attribute_1.default.BOOLEAN);
attributeDefinitions.addInherited("className","borderClassName").setType(Attribute_1.default.STRING);attributeDefinitions.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(Attribute_1.default.BOOLEAN);attributeDefinitions.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(Attribute_1.default.BOOLEAN);attributeDefinitions.addInherited("size","borderSize").setType(Attribute_1.default.NUMBER);attributeDefinitions.addInherited("minSize","borderMinSize").setType(Attribute_1.default.NUMBER);
return attributeDefinitions};BorderNode.prototype.getLocation=function(){return this._location};BorderNode.prototype.getTabHeaderRect=function(){return this._tabHeaderRect};BorderNode.prototype.getRect=function(){return this._tabHeaderRect};BorderNode.prototype.getContentRect=function(){return this._contentRect};BorderNode.prototype.isEnableDrop=function(){return this._getAttr("enableDrop")};BorderNode.prototype.isAutoSelectTab=function(whenOpen){null==whenOpen&&(whenOpen=-1!==this.getSelected());
return whenOpen?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")};BorderNode.prototype.getClassName=function(){return this._getAttributeAsStringOrUndefined("className")};BorderNode.prototype.calcBorderBarSize=function(metrics){var barSize=this._getAttr("barSize");this._calculatedBorderBarSize=0!==barSize?barSize:metrics.borderBarSize};BorderNode.prototype.getBorderBarSize=function(){return this._calculatedBorderBarSize};BorderNode.prototype.getSize=function(){return this._getAttr("size")};
BorderNode.prototype.getMinSize=function(){return this._getAttr("minSize")};BorderNode.prototype.getSelected=function(){return this._attributes.selected};BorderNode.prototype.getSelectedNode=function(){if(-1!==this.getSelected())return this._children[this.getSelected()]};BorderNode.prototype.getOrientation=function(){return this._location.getOrientation()};BorderNode.prototype.isMaximized=function(){return!1};BorderNode.prototype.isShowing=function(){return this._attributes.show};BorderNode.prototype._setSelected=
function(index){this._attributes.selected=index};BorderNode.prototype._setSize=function(pos){this._attributes.size=pos};BorderNode.prototype._updateAttrs=function(json){BorderNode._attributeDefinitions.update(json,this._attributes)};BorderNode.prototype._getDrawChildren=function(){return this._drawChildren};BorderNode.prototype._setAdjustedSize=function(size){this._adjustedSize=size};BorderNode.prototype._getAdjustedSize=function(){return this._adjustedSize};BorderNode.prototype._layoutBorderOuter=
function(outer,metrics){this.calcBorderBarSize(metrics);outer=this._location.split(outer,this.getBorderBarSize());this._tabHeaderRect=outer.start;return outer.end};BorderNode.prototype._layoutBorderInner=function(inner,metrics){var _this=this;this._drawChildren=[];var location=this._location,split1=location.split(inner,this._adjustedSize+this._model.getSplitterSize());location=location.reflect().split(split1.start,this._model.getSplitterSize());this._contentRect=location.end;this._children.forEach(function(child,
i){child._layout(_this._contentRect,metrics);child._setVisible(i===_this.getSelected());_this._drawChildren.push(child)});if(-1===this.getSelected())return inner;inner=new SplitterNode_1.default(this._model);inner._setParent(this);inner._setRect(location.start);this._drawChildren.push(inner);return split1.end};BorderNode.prototype._remove=function(node){node=this._removeChild(node);-1!==this.getSelected()&&Utils_1.adjustSelectedIndex(this,node)};BorderNode.prototype.canDrop=function(dragNode,x,y){if(dragNode.getType()===
TabNode_1.default.TYPE){var dockLocation=DockLocation_1.default.CENTER;if(this._tabHeaderRect.contains(x,y)){if(this._location._orientation===Orientation_1.default.VERT)if(0<this._children.length){var child=this._children[0];child=child.getTabRect();y=child.y;for(var childHeight=child.height,pos=this._tabHeaderRect.x,childCenter,i=0;i<this._children.length;i++){child=this._children[i];child=child.getTabRect();childCenter=child.x+child.width/2;if(x>=pos&&x<childCenter){var dropInfo=new Rect_1.default(child.x-
2,y,3,childHeight);dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,i,"flexlayout__outline_rect");break}pos=childCenter}null==dropInfo&&(dropInfo=new Rect_1.default(child.getRight()-2,y,3,childHeight),dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,this._children.length,"flexlayout__outline_rect"))}else dropInfo=new Rect_1.default(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18),dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,0,"flexlayout__outline_rect");else if(0<
this._children.length){child=this._children[0];child=child.getTabRect();x=child.x;childHeight=child.width;pos=this._tabHeaderRect.y;for(i=0;i<this._children.length;i++){child=this._children[i];child=child.getTabRect();childCenter=child.y+child.height/2;if(y>=pos&&y<childCenter){dropInfo=new Rect_1.default(x,child.y-2,childHeight,3);dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,i,"flexlayout__outline_rect");break}pos=childCenter}null==dropInfo&&(dropInfo=new Rect_1.default(x,child.getBottom()-
2,childHeight,3),dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,this._children.length,"flexlayout__outline_rect"))}else dropInfo=new Rect_1.default(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3),dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,0,"flexlayout__outline_rect");if(!dragNode._canDockInto(dragNode,dropInfo))return}else if(-1!==this.getSelected()&&this._contentRect.contains(x,y)&&(dropInfo=this._contentRect,dropInfo=new DropInfo_1.default(this,dropInfo,dockLocation,
-1,"flexlayout__outline_rect"),!dragNode._canDockInto(dragNode,dropInfo)))return;return dropInfo}};BorderNode.prototype.drop=function(dragNode,location,index,select){location=0;var dragParent=dragNode.getParent();void 0!==dragParent&&(location=dragParent._removeChild(dragNode),Utils_1.adjustSelectedIndex(dragParent,location));dragNode.getType()===TabNode_1.default.TYPE&&dragParent===this&&location<index&&0<index&&index--; -1===index&&(index=this._children.length);dragNode.getType()===TabNode_1.default.TYPE&&
this._addChild(dragNode,index);(select||!1!==select&&this.isAutoSelectTab())&&this._setSelected(index);this._model._tidy()};BorderNode.prototype._toJson=function(){var json={};BorderNode._attributeDefinitions.toJson(json,this._attributes);json.location=this._location.getName();json.children=this._children.map(function(child){return child._toJson()});return json};BorderNode.prototype._getSplitterBounds=function(splitter,useMinSize){void 0===useMinSize&&(useMinSize=!1);var pBounds=[0,0];useMinSize=
useMinSize?this.getMinSize():0;var outerRect=this._model._getOuterInnerRects().outer,innerRect=this._model._getOuterInnerRects().inner;this._location===DockLocation_1.default.TOP?(pBounds[0]=outerRect.y+useMinSize,pBounds[1]=innerRect.getBottom()-splitter.getHeight()):this._location===DockLocation_1.default.LEFT?(pBounds[0]=outerRect.x+useMinSize,pBounds[1]=innerRect.getRight()-splitter.getWidth()):this._location===DockLocation_1.default.BOTTOM?(pBounds[0]=innerRect.y,pBounds[1]=outerRect.getBottom()-
splitter.getHeight()-useMinSize):this._location===DockLocation_1.default.RIGHT&&(pBounds[0]=innerRect.x,pBounds[1]=outerRect.getRight()-splitter.getWidth()-useMinSize);return pBounds};BorderNode.prototype._calculateSplit=function(splitter,splitterPos){splitter=this._getSplitterBounds(splitter);return this._location===DockLocation_1.default.BOTTOM||this._location===DockLocation_1.default.RIGHT?Math.max(0,splitter[1]-splitterPos):Math.max(0,splitterPos-splitter[0])};BorderNode.prototype._getAttributeDefinitions=
function(){return BorderNode._attributeDefinitions};BorderNode.TYPE="border";BorderNode._attributeDefinitions=BorderNode._createAttributeDefinitions();return BorderNode}(global.default);exports.default=require}
//# sourceMappingURL=module$node_modules$flexlayout_react$lib$model$BorderNode.js.map
